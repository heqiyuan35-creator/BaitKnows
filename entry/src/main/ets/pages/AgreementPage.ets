/**
 * 饵知道 - 协议展示页面
 * 展示隐私政策和用户协议
 */
import { ThemeColors } from '../theme/ThemeColors';
import { ThemeConstants } from '../theme/ThemeConstants';
import { Router, RouteParams } from '../router/Router';

@Entry
@Component
struct AgreementPage {
  @State title: string = '';
  @State content: string = '';

  aboutToAppear(): void {
    const params = Router.getParams();
    if (params) {
      this.title = params.title || '协议';
      const type = params.type || 'privacy';
      this.content = type === 'privacy' ? this.getPrivacyPolicy() : this.getUserAgreement();
    }
  }

  build() {
    Column() {
      // 顶部导航栏
      Row() {
        Image($r('app.media.Left'))
          .width(24)
          .height(24)
          .fillColor(ThemeColors.TEXT_PRIMARY)
          .onClick(() => Router.back())

        Blank()

        Text(this.title)
          .fontSize(ThemeConstants.FONT_SIZE_LG)
          .fontWeight(FontWeight.Medium)
          .fontColor(ThemeColors.TEXT_PRIMARY)

        Blank()

        Row().width(24)
      }
      .width('100%')
      .height(56)
      .padding({ left: 16, right: 16, top: 40 })

      // 内容区域
      Scroll() {
        Text(this.content)
          .fontSize(14)
          .fontColor(ThemeColors.TEXT_PRIMARY)
          .lineHeight(24)
          .padding(ThemeConstants.SPACE_MD)
      }
      .layoutWeight(1)
      .scrollBar(BarState.Auto)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(ThemeColors.BG_PRIMARY)
  }

  // 隐私政策内容
  private getPrivacyPolicy(): string {
    return `饵知道隐私政策

更新日期：2024年12月
生效日期：2024年12月

欢迎使用饵知道！我们非常重视您的隐私保护。本隐私政策旨在向您说明我们如何收集、使用、存储和保护您的个人信息。请您在使用本应用前仔细阅读本政策。

一、我们收集的信息

1. 位置信息
- 用途：获取您当前位置以提供周边钓点推荐、天气信息展示
- 收集方式：通过设备GPS定位服务获取
- 存储：仅在本地使用，不上传至服务器

2. 相册/存储权限（申请中）
- 用途：保存渔获分享图到相册
- 收集方式：用户主动触发保存操作时使用
- 存储：图片保存在用户设备本地相册

3. 麦克风权限
- 用途：语音输入功能（如有）
- 收集方式：用户主动触发语音功能时使用
- 存储：语音数据仅用于即时识别，不存储

4. 用户生成内容
- 渔获记录：钓点位置、鱼种、重量、数量、照片等
- 自定义配方：配方名称、原料配比、使用建议等
- 自定义鱼种/原料：用户添加的鱼种和原料信息
- 收藏和历史：收藏的配方、生成历史记录
- 存储：所有数据均存储在用户设备本地

二、我们如何使用信息

1. 提供核心功能
- 根据位置和天气推荐合适的饵料配方
- 记录和管理您的渔获数据
- 展示周边钓点地图

2. 改善用户体验
- 记住您的偏好设置
- 提供个性化的配方推荐
- 计算用户等级和成就

3. 数据分析
- 所有分析均在本地进行
- 不收集任何用于商业分析的数据

三、信息存储与安全

1. 本地存储
- 所有用户数据均存储在您的设备本地
- 使用HarmonyOS Preferences安全存储机制
- 不上传至任何云端服务器

2. 数据安全
- 应用不包含任何网络数据传输功能（天气API除外）
- 天气数据通过和风天气API获取，仅传输位置坐标
- 地图服务使用华为Petal Maps，遵循华为隐私政策

3. 数据删除
- 您可以随时在"我的"页面清除缓存
- 您可以随时重置所有数据
- 卸载应用将删除所有本地数据

四、第三方服务

本应用使用以下第三方服务：

1. 和风天气API
- 用途：获取实时天气数据
- 数据：仅传输位置坐标
- 隐私政策：https://www.qweather.com/privacy

2. 华为Petal Maps
- 用途：地图展示、钓点搜索、逆地理编码
- 数据：位置坐标
- 隐私政策：遵循华为HarmonyOS隐私政策

五、您的权利

1. 访问权：您可以随时查看您的所有数据
2. 删除权：您可以随时删除任何记录或重置所有数据
3. 拒绝权：您可以拒绝授予任何权限（可能影响部分功能）

六、未成年人保护

本应用不针对未成年人收集任何个人信息。如果您是未成年人，请在监护人指导下使用本应用。

七、隐私政策更新

我们可能会不时更新本隐私政策。更新后的政策将在应用内公布，请您定期查阅。

八、联系我们

如果您对本隐私政策有任何疑问，请通过以下方式联系我们：

开发者：何启源
邮箱：2770113524@qq.com

感谢您信任并使用饵知道！`;
  }

  // 用户协议内容
  private getUserAgreement(): string {
    return `饵知道用户服务协议

更新日期：2024年12月
生效日期：2024年12月

欢迎使用饵知道！请您在使用本应用前仔细阅读本协议。使用本应用即表示您同意本协议的全部条款。

一、服务说明

饵知道是一款钓鱼辅助工具应用，主要提供以下功能：

1. 智能配方推荐
- 根据目标鱼种、水域类型、季节天气等条件推荐饵料配方
- 精确匹配功能提供更精准的配方建议
- 支持用户自定义配方

2. 渔获记录管理
- 记录每次钓鱼的渔获数据
- 支持添加照片、位置、天气等信息
- 提供数据统计和分析

3. 钓点地图
- 展示周边钓点位置
- 提供钓点信息和饵料推荐

4. 配方库
- 内置丰富的饵料配方
- 支持收藏和自定义配方
- 配方生成历史记录

5. 用户等级系统
- 根据钓鱼活动积累经验值
- 解锁不同等级称号

二、用户行为规范

使用本应用时，您应当：

1. 遵守法律法规
- 遵守当地钓鱼相关法律法规
- 在允许钓鱼的区域进行钓鱼活动
- 遵守禁渔期和禁渔区规定

2. 保护生态环境
- 不使用违禁饵料和钓具
- 适度捕捞，保护渔业资源
- 保持钓点环境整洁

3. 合理使用应用
- 不得利用本应用从事任何违法活动
- 不得恶意攻击或干扰应用正常运行
- 不得传播虚假或有害信息

三、知识产权

1. 应用版权
- 本应用的所有内容（包括但不限于界面设计、图标、文字、代码）均受知识产权法保护
- 未经授权，不得复制、修改、传播本应用的任何内容

2. 用户内容
- 您对自己创建的内容（配方、记录等）享有权利
- 您授权本应用在设备本地存储和展示您的内容

3. 配方数据
- 内置配方仅供参考，实际效果可能因环境而异
- 配方数据来源于公开资料和钓鱼经验总结

四、免责声明

1. 配方效果
- 本应用提供的配方建议仅供参考
- 实际钓鱼效果受多种因素影响，我们不保证配方效果
- 请根据实际情况调整配方

2. 天气和位置信息
- 天气数据来自第三方服务，可能存在误差
- 位置信息依赖设备GPS，精度可能受环境影响
- 请以实际情况为准

3. 数据安全
- 我们尽力保护您的数据安全
- 但不对因设备故障、系统更新等导致的数据丢失负责
- 建议您定期备份重要数据

4. 第三方服务
- 本应用使用的第三方服务（天气API、地图服务）由相应服务商提供
- 我们不对第三方服务的可用性和准确性负责

五、服务变更与终止

1. 服务变更
- 我们可能会不时更新应用功能
- 重大变更将在应用内通知

2. 服务终止
- 您可以随时停止使用本应用
- 我们保留在必要时终止服务的权利

六、协议修改

我们可能会不时修改本协议。修改后的协议将在应用内公布，继续使用本应用即表示您同意修改后的协议。

七、适用法律与争议解决

本协议适用中华人民共和国法律。如发生争议，双方应友好协商解决；协商不成的，可向有管辖权的人民法院提起诉讼。

八、联系方式

如果您对本协议有任何疑问，请通过以下方式联系我们：

开发者：何启源
邮箱：2770113524@qq.com

感谢您使用饵知道，祝您钓鱼愉快！`;
  }
}

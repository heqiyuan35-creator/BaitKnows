/**
 * é¥µçŸ¥é?- ä¸»Tabé¡µé¢
 * åº•éƒ¨5ä¸ªTabï¼šé¦–é¡µã€é…æ–¹ã€?ã€æ—¥è®°ã€æˆ‘çš?
 */
import { ThemeColors } from '../theme/ThemeColors';
import { ThemeConstants } from '../theme/ThemeConstants';

@Entry
@Component
struct MainTabPage {
  @State currentIndex: number = 0;

  @Builder
  TabBarBuilder(title: string, icon: Resource, iconActive: Resource, index: number) {
    Column({ space: 4 }) {
      Image(this.currentIndex === index ? iconActive : icon)
        .width(24)
        .height(24)
        .fillColor(this.currentIndex === index ? ThemeColors.PRIMARY : ThemeColors.TEXT_MUTED)

      Text(title)
        .fontSize(ThemeConstants.FONT_SIZE_XS)
        .fontColor(this.currentIndex === index ? ThemeColors.PRIMARY : ThemeColors.TEXT_MUTED)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }

  @Builder
  CenterTabBuilder() {
    Column() {
      Row() {
        Text('+')
          .fontSize(28)
          .fontWeight(FontWeight.Bold)
          .fontColor(ThemeColors.TEXT_PRIMARY)
      }
      .width(48)
      .height(48)
      .backgroundColor(ThemeColors.PRIMARY)
      .borderRadius(24)
      .justifyContent(FlexAlign.Center)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .offset({ y: -10 })
  }

  @Builder
  PlaceholderPage(title: string, desc: string) {
    Column({ space: 8 }) {
      Text(title)
        .fontSize(ThemeConstants.FONT_SIZE_2XL)
        .fontWeight(FontWeight.Bold)
        .fontColor(ThemeColors.TEXT_PRIMARY)
      Text(desc)
        .fontSize(ThemeConstants.FONT_SIZE_BASE)
        .fontColor(ThemeColors.TEXT_SECONDARY)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .backgroundColor(ThemeColors.BG_PRIMARY)
  }

  build() {
    Tabs({ barPosition: BarPosition.End, index: this.currentIndex }) {
      // é¦–é¡µ
      TabContent() {
        this.PlaceholderPage('é¦–é¡µ', 'å¤©æ°”ä¿¡æ¯ Â· æ™ºèƒ½é…æ–¹ç”Ÿæˆ')
      }
      .tabBar(this.TabBarBuilder('é¦–é¡µ', $r('app.media.home'), $r('app.media.homes'), 0))

      // é…æ–¹
      TabContent() {
        this.PlaceholderPage('é…æ–¹åº?, 'æµè§ˆé±¼é¥µé…æ–¹')
      }
      .tabBar(this.TabBarBuilder('é…æ–¹', $r('app.media.Recipe'), $r('app.media.Recipes'), 1))

      // ä¸­é—´+æŒ‰é’®
      TabContent() {
        this.PlaceholderPage('æ™ºèƒ½ç”Ÿæˆ', 'ä¸€é”®ç”Ÿæˆé…æ–?)
      }
      .tabBar(this.CenterTabBuilder())

      // æ—¥è®°
      TabContent() {
        this.PlaceholderPage('æ¸”èŽ·æ—¥è®°', 'è®°å½•æ¯ä¸€æ¬¡æ”¶èŽ?)
      }
      .tabBar(this.TabBarBuilder('æ—¥è®°', $r('app.media.time'), $r('app.media.times'), 3))

      // æˆ‘çš„
      TabContent() {
        this.PlaceholderPage('æˆ‘çš„', 'ä¸ªäººä¸­å¿ƒ')
      }
      .tabBar(this.TabBarBuilder('æˆ‘çš„', $r('app.media.mine'), $r('app.media.mines'), 4))
    }
    .barHeight(ThemeConstants.TAB_BAR_HEIGHT)
    .barBackgroundColor(ThemeColors.BG_SECONDARY)
    .onChange((index: number) => {
      this.currentIndex = index;
    })
    .width('100%')
    .height('100%')
    .backgroundColor(ThemeColors.BG_PRIMARY)
  }
}

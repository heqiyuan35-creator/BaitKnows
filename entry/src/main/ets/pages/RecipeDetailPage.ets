/**
 * é¥µçŸ¥é“ - é…æ–¹è¯¦æƒ…é¡µ
 * æ”¯æŒæ˜¾ç¤ºé¢„è®¾é…æ–¹å’Œç”¨æˆ·ä¿å­˜çš„é…æ–¹
 */
import { ThemeColors } from '../theme/ThemeColors';
import { ThemeConstants } from '../theme/ThemeConstants';
import { Router } from '../router/Router';
import { router } from '@kit.ArkUI';
import { userDataService, CustomRecipe, CustomRecipeIngredient, RecipeStateProfile, RecipeFlavorProfile } from '../services/UserDataService';

// é…æ–¹ææ–™ç±»
class RecipeIngredientItem {
  name: string = '';
  amount: string = '';
  unit: string = '';

  constructor(name: string = '', amount: string = '', unit: string = '') {
    this.name = name;
    this.amount = amount;
    this.unit = unit;
  }
}

// æ¨èç†ç”±ç±»
class RecommendReasonItem {
  title: string = '';
  description: string = '';

  constructor(title: string = '', description: string = '') {
    this.title = title;
    this.description = description;
  }
}

// é…æ–¹è¯¦æƒ…ç±»
class RecipeDetailData {
  id: string = '';
  name: string = '';
  description: string = '';
  targetFish: string[] = [];
  waterTypes: string[] = [];
  seasons: string[] = [];
  difficulty: string = 'ç®€å•';
  prepTime: string = '10åˆ†é’Ÿ';
  ingredients: RecipeIngredientItem[] = [];
  steps: string[] = [];
  tips: string[] = [];
  rating: number = 4.5;
  usageCount: number = 0;
  flavorPrimary: string = '';
  flavorIntensity: number = 3;
  suitableTemp: string = '15-25Â°C';
  atomization: number = 3;
  viscosity: number = 3;
  hookHolding: number = 3;
  weight: number = 3;
  reasons: RecommendReasonItem[] = [];
  isUserRecipe: boolean = false;
}


// é¢„è®¾é…æ–¹æ•°æ®åº“
class PresetRecipeDatabase {
  private static recipes: Map<string, RecipeDetailData> = new Map();
  private static initialized: boolean = false;

  static initialize(): void {
    if (PresetRecipeDatabase.initialized) return;

    // æ± å¡˜é…æ–¹
    PresetRecipeDatabase.addRecipe('r_001', 'æ± å¡˜é²«é±¼æ•£ç‚®', 'ä¸“ä¸ºæ± å¡˜é’“é²«é±¼è®¾è®¡çš„æ•£ç‚®é…æ–¹ï¼Œé›¾åŒ–å¿«ï¼Œè¯±é±¼æ•ˆæœå¥½ã€‚', ['é²«é±¼'], ['æ± å¡˜'], ['æ˜¥å­£'],
      [new RecipeIngredientItem('éº¸çš®', '200', 'g'), new RecipeIngredientItem('é›ªèŠ±ç²‰', '100', 'g'), new RecipeIngredientItem('æ‹‰ä¸ç²‰', '50', 'g')],
      ['å°†éº¸çš®å’Œé›ªèŠ±ç²‰æŒ‰2:1æ¯”ä¾‹æ··åˆ', 'åŠ å…¥æ‹‰ä¸ç²‰æ…æ‹Œå‡åŒ€', 'æŒ‰1:0.8æ¯”ä¾‹åŠ æ°´', 'é™ç½®5åˆ†é’Ÿåä½¿ç”¨'],
      ['æ•£ç‚®ä¸å®œå¤ªæ¹¿', 'æŠ›ç«¿é¢‘ç‡è¦å¿«'], 'è°·é¦™', 3, 4, 2, 3, 3);

    PresetRecipeDatabase.addRecipe('r_002', 'é»‘å‘é²¤é±¼é¢—ç²’', 'é»‘å‘é’“é²¤é±¼ä¸“ç”¨ï¼ŒåŸå¡˜é¢—ç²’ä¸ºä¸»ï¼Œé€‚å£æ€§å¥½ã€‚', ['é²¤é±¼'], ['æ± å¡˜'], ['å››å­£'],
      [new RecipeIngredientItem('åŸå¡˜é¢—ç²’', '300', 'g'), new RecipeIngredientItem('å°è¯', '5', 'ml'), new RecipeIngredientItem('çŠ¶æ€ç²‰', '50', 'g')],
      ['é¢—ç²’ç”¨æ°´æ³¡è½¯', 'åŠ å…¥å°è¯æ…æ‹Œ', 'åŠ å…¥çŠ¶æ€ç²‰è°ƒæ•´', 'æ‰æˆè½¯ç¡¬é€‚ä¸­çš„é¥µå›¢'],
      ['é¢—ç²’è¦æ³¡é€', 'å°è¯ä¸å®œè¿‡é‡'], 'åŸå¡˜å‘³', 4, 3, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_003', 'æ± å¡˜è‰é±¼é’è‰é¥µ', 'å¤å­£æµ®é’“è‰é±¼ä¸“ç”¨ï¼Œæ¸…é¦™è‡ªç„¶ã€‚', ['è‰é±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('å«©è‰', 'é€‚é‡', ''), new RecipeIngredientItem('ç‰ç±³', '100', 'g'), new RecipeIngredientItem('éº¦éº¸', '50', 'g')],
      ['å«©è‰åˆ‡æ®µå¤‡ç”¨', 'ç‰ç±³ç…®ç†Ÿ', 'éº¦éº¸åŠ æ°´è°ƒæˆç³Š', 'è‰æ®µè˜¸éº¦éº¸ç³Šä½¿ç”¨'],
      ['è‰è¦æ–°é²œå«©ç»¿', 'æµ®é’“æ•ˆæœæ›´å¥½'], 'è‰é¦™', 3, 4, 2, 3, 2);

    PresetRecipeDatabase.addRecipe('r_004', 'æ± å¡˜é³™é±¼é…¸è‡­é¥µ', 'å¤å­£æµ®é’“é³™é±¼ä¸“ç”¨ï¼Œé…¸è‡­å‘³å‹è¯±é±¼æ•ˆæœæä½³ã€‚', ['é³™é±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('è‡­è±†è…æ±', '50', 'ml'), new RecipeIngredientItem('è’œç²‰', '30', 'g'), new RecipeIngredientItem('é›ªèŠ±ç²‰', '200', 'g')],
      ['é›ªèŠ±ç²‰å€’å…¥ç›†ä¸­', 'åŠ å…¥è‡­è±†è…æ±æ…æ‹Œ', 'æ’’å…¥è’œç²‰æ··åˆå‡åŒ€', 'åŠ æ°´è°ƒæˆæ•£ç‚®çŠ¶æ€'],
      ['å‘³é“è¦å¤Ÿå†²', 'é›¾åŒ–è¦å¿«', 'æµ®é’“æ•ˆæœæœ€ä½³'], 'é…¸è‡­', 5, 5, 1, 2, 2);

    PresetRecipeDatabase.addRecipe('r_005', 'æ± å¡˜é²¢é±¼é…¸é¥µ', 'å¤å­£æµ®é’“é²¢é±¼ä¸“ç”¨ï¼Œæœé…¸å‘³å‹æ¸…çˆ½è¯±é±¼ã€‚', ['é²¢é±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('æœé…¸', '30', 'ml'), new RecipeIngredientItem('ç™½é†‹', '20', 'ml'), new RecipeIngredientItem('é›ªèŠ±ç²‰', '200', 'g')],
      ['é›ªèŠ±ç²‰å€’å…¥ç›†ä¸­', 'åŠ å…¥æœé…¸å’Œç™½é†‹', 'å¿«é€Ÿæ…æ‹Œå‡åŒ€', 'è°ƒæˆæ•£ç‚®çŠ¶æ€ä½¿ç”¨'],
      ['é…¸å‘³è¦è¶³', 'é›¾åŒ–è¦å¿«', 'é’“æµ®æ•ˆæœå¥½'], 'æœé…¸', 4, 5, 1, 2, 2);

    PresetRecipeDatabase.addRecipe('r_006', 'å—æ–¹ç½—éä¸“ç”¨é¥µ', 'å—æ–¹æ± å¡˜é’“ç½—éé±¼ä¸“ç”¨ï¼Œè…¥å‘³æµ“éƒé€‚å£æ€§å¥½ã€‚', ['ç½—éé±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('ç½—éé¢—ç²’', '200', 'g'), new RecipeIngredientItem('è™¾ç²‰', '50', 'g'), new RecipeIngredientItem('èš¯èš“è†', '20', 'ml')],
      ['ç½—éé¢—ç²’ç”¨æ°´æ³¡è½¯', 'åŠ å…¥è™¾ç²‰æ…æ‹Œ', 'æ»´å…¥èš¯èš“è†å¢è…¥', 'æ‰æˆè½¯ç¡¬é€‚ä¸­é¥µå›¢'],
      ['é¢—ç²’è¦æ³¡é€', 'è…¥å‘³è¦è¶³', 'åº•é’“æ•ˆæœå¥½'], 'æµ“è…¥', 5, 3, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_007', 'é»‘å‘å‰å°¾ä¸“ç”¨é¥µ', 'é»‘å‘å¤œé’“æ–‘ç‚¹å‰å°¾é®°ä¸“ç”¨ï¼Œæµ“è…¥å‘³å‹è¯±é±¼å¿«ã€‚', ['æ–‘ç‚¹å‰å°¾é®°'], ['æ± å¡˜'], ['å››å­£'],
      [new RecipeIngredientItem('é²¶é±¼é¢—ç²’', '200', 'g'), new RecipeIngredientItem('é¸¡è‚ç²‰', '80', 'g'), new RecipeIngredientItem('è™¾ç²‰', '50', 'g')],
      ['é²¶é±¼é¢—ç²’æ³¡è½¯', 'åŠ å…¥é¸¡è‚ç²‰å’Œè™¾ç²‰', 'å……åˆ†æ…æ‹Œå‡åŒ€', 'æ‰æˆè¾ƒç²˜é¥µå›¢'],
      ['è…¥å‘³è¦æµ“', 'å¤œé’“æ•ˆæœæœ€ä½³', 'é¥µå›¢è¦ç²˜'], 'æµ“è…¥', 5, 2, 4, 5, 4);

    PresetRecipeDatabase.addRecipe('r_008', 'æ± å¡˜é²¶é±¼è…¥é¥µ', 'æ± å¡˜å¤œé’“é²¶é±¼ä¸“ç”¨ï¼Œé¸¡è‚èš¯èš“ç»„åˆæ•ˆæœæä½³ã€‚', ['é²¶é±¼'], ['æ± å¡˜'], ['å››å­£'],
      [new RecipeIngredientItem('é¸¡è‚', '200', 'g'), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('è¡€ç²‰', '30', 'g')],
      ['é¸¡è‚åˆ‡å°å—å¤‡ç”¨', 'èš¯èš“ç©¿é’©ä½¿ç”¨', 'è¡€ç²‰æ‹Œå…¥é¸¡è‚å¢è…¥', 'é¸¡è‚æŒ‚é’©æˆ–æ‰“çª'],
      ['é¸¡è‚è¦æ–°é²œ', 'å¤œé’“æ•ˆæœæœ€ä½³', 'è…¥å‘³è¦è¶³'], 'è¡€è…¥', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_009', 'æ± å¡˜æ³¥é³…é¥µ', 'æ± å¡˜é’“æ³¥é³…ä¸“ç”¨ï¼Œèš¯èš“çº¢è™«æ•ˆæœæœ€ä½³ã€‚', ['æ³¥é³…'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', '')],
      ['èš¯èš“åˆ‡æ®µç©¿é’©', 'çº¢è™«å¤šæ¡æŒ‚é’©', 'é’“åº•æ•ˆæœå¥½', 'ä¿æŒå®‰é™ç­‰å¾…'],
      ['ç”¨ç»†çº¿å°é’©', 'åŠ¨ä½œè¦è½»', 'æ³¥åº•åŒºåŸŸæ•ˆæœå¥½'], 'è…¥é¦™', 4, 1, 5, 4, 3);

    PresetRecipeDatabase.addRecipe('r_010', 'æ± å¡˜é»‘é±¼é›·è›™', 'æ± å¡˜è·¯äºšé»‘é±¼ä¸“ç”¨ï¼Œé›·è›™æ˜¯é»‘é±¼å…‹æ˜Ÿã€‚', ['é»‘é±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('é›·è›™', '1', 'åª'), new RecipeIngredientItem('è½¯è™«', 'é€‚é‡', ''), new RecipeIngredientItem('æ³¥é³…', 'é€‚é‡', '')],
      ['é›·è›™ç»‘å¥½çº¿ç»„', 'æŠ›æŠ•åˆ°è‰è¾¹æˆ–éšœç¢åŒº', 'æ¨¡æ‹Ÿé’è›™è·³åŠ¨', 'é»‘é±¼ç‚¸æ°´åæ‰¬ç«¿'],
      ['è‰è¾¹éšœç¢åŒºæ•ˆæœå¥½', 'æ—©æ™šæ—¶æ®µæœ€ä½³', 'æ‰¬ç«¿è¦æœ‰åŠ›'], 'è·¯äºš', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_011', 'æ± å¡˜ç”²é±¼é¥µ', 'æ± å¡˜å¤œé’“ç”²é±¼ä¸“ç”¨ï¼ŒåŠ¨ç‰©å†…è„æ•ˆæœæä½³ã€‚', ['ç”²é±¼'], ['æ± å¡˜'], ['å¤å­£'],
      [new RecipeIngredientItem('é¸¡è‚', '200', 'g'), new RecipeIngredientItem('çŒªè‚', '100', 'g'), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', '')],
      ['é¸¡è‚çŒªè‚åˆ‡å—', 'èš¯èš“ç©¿é’©ä½¿ç”¨', 'å†…è„æ‰“çªè¯±é±¼', 'è€å¿ƒå®ˆé’“'],
      ['å¤œé’“æ•ˆæœæœ€ä½³', 'å†…è„è¦æ–°é²œ', 'é’©è¦é”‹åˆ©'], 'è¡€è…¥', 5, 1, 5, 5, 5);

    // æ²³æµé…æ–¹
    PresetRecipeDatabase.addRecipe('r_101', 'é‡æ²³é²«é±¼èš¯èš“ä¼´ä¾£', 'é‡æ²³é’“é²«é±¼ç»å…¸é…æ–¹ï¼Œèš¯èš“ç²‰å¢åŠ è¯±é±¼æ•ˆæœã€‚', ['é²«é±¼'], ['æ²³æµ'], ['å››å­£'],
      [new RecipeIngredientItem('èš¯èš“ç²‰', '50', 'g'), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', ''), new RecipeIngredientItem('é…’ç±³', '100', 'g')],
      ['é…’ç±³æå‰æ‰“çª', 'èš¯èš“ç²‰æ‹Œå…¥é¥µæ–™', 'çº¢è™«æŒ‚é’©ä½¿ç”¨', 'ä¿æŒå®‰é™ç­‰å¾…'],
      ['é‡æ²³è¦æ‰¾é±¼é“', 'é…’ç±³çªé‡è¦è¶³'], 'è…¥é¦™', 4, 3, 3, 4, 3);

    PresetRecipeDatabase.addRecipe('r_102', 'æ±Ÿæ²³é²¤é±¼ç‰ç±³é¥µ', 'æ±Ÿæ²³å®ˆé’“å¤§é²¤ä¸“ç”¨ï¼Œå‘é…µç‰ç±³è¯±é±¼æ•ˆæœæä½³ã€‚', ['é²¤é±¼'], ['æ²³æµ'], ['å¤ç§‹'],
      [new RecipeIngredientItem('å‘é…µç‰ç±³', '500', 'g'), new RecipeIngredientItem('èœ‚èœœ', '30', 'ml'), new RecipeIngredientItem('éº¦ç²’', '200', 'g')],
      ['å‘é…µç‰ç±³æ‰“é‡çª', 'èœ‚èœœæ‹Œå…¥ç‰ç±³', 'éº¦ç²’æ··åˆä½¿ç”¨', 'è€å¿ƒå®ˆé’“'],
      ['çªé‡è¦å¤§', 'å®ˆé’“è¦æœ‰è€å¿ƒ'], 'é…’é¦™', 5, 2, 5, 5, 4);

    PresetRecipeDatabase.addRecipe('r_103', 'æ²³æµè‰é±¼å«©è‰é¥µ', 'æ²³æµæµ®é’“è‰é±¼ä¸“ç”¨ï¼Œå«©è‰èŠ¦è‹‡èŠ¯è‡ªç„¶æ¸…é¦™ã€‚', ['è‰é±¼'], ['æ²³æµ'], ['å¤å­£'],
      [new RecipeIngredientItem('å«©è‰', 'é€‚é‡', ''), new RecipeIngredientItem('èŠ¦è‹‡èŠ¯', 'é€‚é‡', ''), new RecipeIngredientItem('ç‰ç±³ç²’', '100', 'g')],
      ['å«©è‰åˆ‡æ®µå¤‡ç”¨', 'èŠ¦è‹‡èŠ¯å–å«©å¿ƒ', 'ç‰ç±³ç²’ç…®ç†Ÿæ‰“çª', 'è‰æ®µæŒ‚é’©æµ®é’“'],
      ['è‰è¦æ–°é²œå«©ç»¿', 'æµ®é’“ä¸­ä¸Šå±‚', 'æ—©æ™šæ•ˆæœå¥½'], 'è‰é¦™', 3, 4, 2, 3, 2);

    PresetRecipeDatabase.addRecipe('r_104', 'æ²³æµé²¶é±¼è…¥é¥µ', 'æ²³æµå¤œé’“é²¶é±¼ä¸“ç”¨ï¼Œæ·±æ½­åŒºåŸŸæ•ˆæœæä½³ã€‚', ['é²¶é±¼'], ['æ²³æµ'], ['å››å­£'],
      [new RecipeIngredientItem('é¸¡è‚', '200', 'g'), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('æ³¥é³…', 'é€‚é‡', '')],
      ['é¸¡è‚åˆ‡å—æ‰“çª', 'èš¯èš“æˆ–æ³¥é³…æŒ‚é’©', 'é€‰æ‹©æ·±æ½­åŒºåŸŸ', 'å¤œé’“å®ˆå€™'],
      ['æ·±æ½­æ•ˆæœå¥½', 'å¤œé’“æœ€ä½³', 'è…¥å‘³è¦è¶³'], 'è¡€è…¥', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_105', 'æ²³æµé»„é¢¡é±¼é¥µ', 'æ²³æµå¤œé’“é»„é¢¡é±¼ä¸“ç”¨ï¼ŒçŸ³ç¼ä¹±çŸ³åŒºæ•ˆæœå¥½ã€‚', ['é»„é¢¡é±¼'], ['æ²³æµ'], ['å¤å­£'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('é¸¡è‚', '100', 'g'), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', '')],
      ['èš¯èš“ç©¿é’©ä½¿ç”¨', 'é¸¡è‚åˆ‡å°å—æ‰“çª', 'çº¢è™«å¤‡ç”¨', 'çŸ³ç¼åŒºåŸŸä½œé’“'],
      ['çŸ³ç¼ä¹±çŸ³åŒºæ•ˆæœå¥½', 'å¤œé’“æœ€ä½³', 'ç”¨å°é’©ç»†çº¿'], 'è…¥é¦™', 4, 2, 4, 4, 3);

    PresetRecipeDatabase.addRecipe('r_106', 'æ²³æµé³Šé±¼ç´ é¥µ', 'æ²³æµé’“é³Šé±¼ä¸“ç”¨ï¼Œé¦™ç”œå‘³å‹ä¸­å±‚æ•ˆæœå¥½ã€‚', ['é³Šé±¼'], ['æ²³æµ'], ['æ˜¥å¤'],
      [new RecipeIngredientItem('éº¸çš®', '150', 'g'), new RecipeIngredientItem('ç‰ç±³ç²‰', '100', 'g'), new RecipeIngredientItem('èœ‚èœœ', '20', 'ml')],
      ['éº¸çš®ç‰ç±³ç²‰æ··åˆ', 'åŠ å…¥èœ‚èœœæ…æ‹Œ', 'åŠ æ°´è°ƒæˆè½¯é¥µ', 'é’“ä¸­å±‚æ•ˆæœå¥½'],
      ['å‘³å‹è¦é¦™ç”œ', 'é’“ä¸­å±‚', 'æ˜¥å¤æ•ˆæœå¥½'], 'é¦™ç”œ', 4, 4, 3, 3, 3);

    PresetRecipeDatabase.addRecipe('r_107', 'æ²³æµç¿˜å˜´è·¯äºšé¥µ', 'æ²³æµè·¯äºšç¿˜å˜´ä¸“ç”¨ï¼Œäº®ç‰‡æ´»è™¾æ•ˆæœæä½³ã€‚', ['ç¿˜å˜´'], ['æ²³æµ'], ['å¤ç§‹'],
      [new RecipeIngredientItem('äº®ç‰‡', '1', 'åª'), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['äº®ç‰‡ç»‘å¥½çº¿ç»„', 'æŠ›æŠ•åˆ°æ°´é¢', 'å¿«é€Ÿæ”¶çº¿æ¨¡æ‹Ÿå°é±¼', 'ç¿˜å˜´è¿½å’¬åæ‰¬ç«¿'],
      ['æ—©æ™šæ•ˆæœæœ€ä½³', 'æ°´é¢æœ‰é±¼èŠ±æ—¶ä½œé’“', 'æ”¶çº¿è¦å¿«'], 'è·¯äºš', 5, 1, 5, 5, 4);

    PresetRecipeDatabase.addRecipe('r_108', 'æºªæµé©¬å£é¥µ', 'æºªæµè·¯äºšé©¬å£ä¸“ç”¨ï¼Œå°å‹æ‹Ÿé¥µæ•ˆæœå¥½ã€‚', ['é©¬å£'], ['æ²³æµ'], ['å¤å­£'],
      [new RecipeIngredientItem('èš‚èš±', 'é€‚é‡', ''), new RecipeIngredientItem('èŸ‹èŸ€', 'é€‚é‡', ''), new RecipeIngredientItem('äº®ç‰‡', '1', 'åª')],
      ['èš‚èš±èŸ‹èŸ€æŒ‚é’©', 'å°äº®ç‰‡æŠ›æŠ•', 'æºªæµæµ…æ»©ä½œé’“', 'è½»è£…ç®€è¡Œ'],
      ['æºªæµæµ…æ»©æ•ˆæœå¥½', 'ç”¨è¶…è½»è£…å¤‡', 'å¤å­£æœ€ä½³'], 'è·¯äºš', 4, 1, 4, 4, 3);

    PresetRecipeDatabase.addRecipe('r_109', 'æ€¥æµé²ƒé±¼é¥µ', 'æ€¥æµé’“é²ƒé±¼ä¸“ç”¨ï¼Œæ´»é¥µæ•ˆæœæœ€ä½³ã€‚', ['é²ƒé±¼'], ['æ²³æµ'], ['å¤å­£'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('èºè›³', 'é€‚é‡', '')],
      ['èš¯èš“ç©¿é’©ä½¿ç”¨', 'æ´»è™¾æŒ‚é’©', 'èºè›³æ‰“çª', 'æ€¥æµåŒºåŸŸä½œé’“'],
      ['æ€¥æµåŒºæ•ˆæœå¥½', 'ç”¨é‡å ', 'æ´»é¥µæœ€ä½³'], 'è…¥é¦™', 4, 2, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_110', 'æ²³é’“èµ¤çœ¼é³Ÿé¥µ', 'æ²³æµé’“èµ¤çœ¼é³Ÿä¸“ç”¨ï¼Œä¸­å±‚ä½œé’“æ•ˆæœå¥½ã€‚', ['èµ¤çœ¼é³Ÿ'], ['æ²³æµ'], ['æ˜¥å¤'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('ç‰ç±³ç²‰', '100', 'g'), new RecipeIngredientItem('é¢ç²‰', '50', 'g')],
      ['ç‰ç±³ç²‰é¢ç²‰æ··åˆ', 'åŠ æ°´è°ƒæˆé¢é¥µ', 'èš¯èš“å¤‡ç”¨', 'é’“ä¸­å±‚'],
      ['ä¸­å±‚æ•ˆæœå¥½', 'æ˜¥å¤æœ€ä½³', 'é¢é¥µè¦è½¯'], 'è°·é¦™', 3, 3, 3, 3, 3);

    PresetRecipeDatabase.addRecipe('r_111', 'æ²³æµæ³¥é³…é¥µ', 'æ²³æµé’“æ³¥é³…ä¸“ç”¨ï¼Œæ³¥åº•åŒºåŸŸæ•ˆæœå¥½ã€‚', ['æ³¥é³…'], ['æ²³æµ'], ['å¤å­£'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', '')],
      ['èš¯èš“åˆ‡æ®µç©¿é’©', 'çº¢è™«å¤šæ¡æŒ‚é’©', 'æ³¥åº•åŒºåŸŸä½œé’“', 'ä¿æŒå®‰é™'],
      ['æ³¥åº•æ•ˆæœå¥½', 'ç”¨ç»†çº¿å°é’©', 'åŠ¨ä½œè¦è½»'], 'è…¥é¦™', 4, 1, 5, 4, 3);

    PresetRecipeDatabase.addRecipe('r_112', 'æ²³æµé³œé±¼æ´»é¥µ', 'æ²³æµé’“é³œé±¼ä¸“ç”¨ï¼Œæ´»é¥µæ˜¯é³œé±¼æœ€çˆ±ã€‚', ['æ²³é³œ'], ['æ²³æµ'], ['æ˜¥ç§‹'],
      [new RecipeIngredientItem('æ´»æ³¥é³…', 'é€‚é‡', ''), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['æ´»æ³¥é³…æŒ‚é’©', 'æ´»è™¾å¤‡ç”¨', 'å°é±¼æ‰“çª', 'éšœç¢åŒºä½œé’“'],
      ['éšœç¢åŒºæ•ˆæœå¥½', 'æ´»é¥µè¦é²œæ´»', 'æ˜¥ç§‹æœ€ä½³'], 'æ´»é¥µ', 5, 1, 5, 5, 5);

    // æ°´åº“é…æ–¹
    PresetRecipeDatabase.addRecipe('r_201', 'æ°´åº“å¤§é²¤å®ˆé’“é¥µ', 'æ°´åº“å®ˆé’“å¤§é²¤ä¸“ç”¨é…æ–¹ï¼Œå‘é…µç‰ç±³é…åˆè¯é…’ï¼Œè¯±é±¼ç•™é±¼æ•ˆæœæä½³ã€‚', ['é²¤é±¼'], ['æ°´åº“'], ['ç§‹å­£'],
      [new RecipeIngredientItem('å‘é…µç‰ç±³', '500', 'g'), new RecipeIngredientItem('çº¢è–¯', '200', 'g'), new RecipeIngredientItem('è¯é…’', '50', 'ml')],
      ['å‘é…µç‰ç±³æå‰å‡†å¤‡', 'çº¢è–¯è’¸ç†Ÿæ£ç¢', 'åŠ å…¥è¯é…’æ…æ‹Œ', 'æ‰“é‡çªå®ˆé’“'],
      ['çªé‡è¦è¶³', 'å®ˆé’“éœ€è€å¿ƒ', 'è¯é…’ä¸å®œè¿‡é‡'], 'é…’é¦™', 5, 2, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_205', 'æ°´åº“é’é±¼èºè›³é¥µ', 'æ°´åº“é’“é’é±¼ä¸“ç”¨ï¼Œèºè›³æ˜¯é’é±¼æœ€çˆ±ã€‚', ['é’é±¼'], ['æ°´åº“'], ['å››å­£'],
      [new RecipeIngredientItem('ç”°èº', '500', 'g'), new RecipeIngredientItem('èºè›³ç²‰', '100', 'g'), new RecipeIngredientItem('èšŒè‚‰ç²‰', '50', 'g')],
      ['ç”°èºç ¸ç¢æ‰“çª', 'èºè›³ç²‰æ‹Œé¥µ', 'èšŒè‚‰ç²‰å¢è…¥', 'æ•´èºæŒ‚é’©'],
      ['èºè›³è¦æ–°é²œ', 'é’©è¦ç”¨å¤§å·'], 'è…¥é¦™', 5, 2, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_202', 'æ°´åº“è‰é±¼æµ®é’“é¥µ', 'æ°´åº“æµ®é’“è‰é±¼ä¸“ç”¨ï¼Œå«©ç‰ç±³é’è‰è‡ªç„¶æ¸…é¦™ã€‚', ['è‰é±¼'], ['æ°´åº“'], ['å¤å­£'],
      [new RecipeIngredientItem('å«©ç‰ç±³', '200', 'g'), new RecipeIngredientItem('é’è‰', 'é€‚é‡', ''), new RecipeIngredientItem('éº¦éº¸', '100', 'g')],
      ['å«©ç‰ç±³å‰¥ç²’å¤‡ç”¨', 'é’è‰åˆ‡æ®µ', 'éº¦éº¸æ‰“çªè¯±é±¼', 'ç‰ç±³æˆ–è‰æ®µæŒ‚é’©'],
      ['æµ®é’“ä¸­ä¸Šå±‚', 'æ—©æ™šæ•ˆæœå¥½', 'è‰è¦æ–°é²œ'], 'è‰é¦™', 3, 4, 2, 3, 2);

    PresetRecipeDatabase.addRecipe('r_203', 'æ°´åº“é³™é±¼æµ®é’“é¥µ', 'æ°´åº“æµ®é’“é³™é±¼ä¸“ç”¨ï¼Œé…¸è‡­å‘³å‹è¯±é±¼å¿«ã€‚', ['é³™é±¼'], ['æ°´åº“'], ['å¤å­£'],
      [new RecipeIngredientItem('è—¿é¦™æ­£æ°”æ°´', '20', 'ml'), new RecipeIngredientItem('è‡­è±†è…æ±', '50', 'ml'), new RecipeIngredientItem('è½»éº¸', '200', 'g')],
      ['è½»éº¸å€’å…¥ç›†ä¸­', 'åŠ å…¥è—¿é¦™æ­£æ°”æ°´', 'åŠ å…¥è‡­è±†è…æ±æ…æ‹Œ', 'è°ƒæˆæ•£ç‚®çŠ¶æ€'],
      ['å‘³é“è¦å¤Ÿå†²', 'é›¾åŒ–è¦å¿«', 'æµ®é’“æ•ˆæœå¥½'], 'é…¸è‡­', 5, 5, 1, 2, 2);

    PresetRecipeDatabase.addRecipe('r_204', 'æ°´åº“é²¢é±¼æ‰‹ç«¿é¥µ', 'æ°´åº“æ‰‹ç«¿é’“é²¢é±¼ä¸“ç”¨ï¼Œæœé…¸å‘³å‹æ¸…çˆ½ã€‚', ['é²¢é±¼'], ['æ°´åº“'], ['å¤å­£'],
      [new RecipeIngredientItem('æœé…¸', '30', 'ml'), new RecipeIngredientItem('ç™½é†‹', '20', 'ml'), new RecipeIngredientItem('é›ªèŠ±ç²‰', '200', 'g')],
      ['é›ªèŠ±ç²‰å€’å…¥ç›†ä¸­', 'åŠ å…¥æœé…¸ç™½é†‹', 'å¿«é€Ÿæ…æ‹Œå‡åŒ€', 'è°ƒæˆæ•£ç‚®ä½¿ç”¨'],
      ['é…¸å‘³è¦è¶³', 'é›¾åŒ–è¦å¿«', 'æµ®é’“æ•ˆæœå¥½'], 'æœé…¸', 4, 5, 1, 2, 2);

    PresetRecipeDatabase.addRecipe('r_206', 'æ°´åº“é³œé±¼æ´»é¥µ', 'æ°´åº“é’“é³œé±¼ä¸“ç”¨ï¼Œæ´»é¥µæ˜¯é³œé±¼æœ€çˆ±ã€‚', ['é³œé±¼'], ['æ°´åº“'], ['æ˜¥ç§‹'],
      [new RecipeIngredientItem('æ´»æ³¥é³…', 'é€‚é‡', ''), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['æ´»æ³¥é³…æŒ‚é’©', 'æ´»è™¾å¤‡ç”¨', 'å°é±¼æ‰“çª', 'éšœç¢åŒºå®ˆé’“'],
      ['éšœç¢åŒºæ•ˆæœå¥½', 'æ´»é¥µè¦é²œæ´»', 'æ˜¥ç§‹æœ€ä½³'], 'æ´»é¥µ', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_207', 'æ°´åº“æ­¦æ˜Œé±¼ç´ é¥µ', 'æ°´åº“é’“æ­¦æ˜Œé±¼ä¸“ç”¨ï¼Œé¦™ç”œå‘³å‹ä¸­å±‚æ•ˆæœå¥½ã€‚', ['æ­¦æ˜Œé±¼'], ['æ°´åº“'], ['æ˜¥å¤'],
      [new RecipeIngredientItem('éº¸çš®', '150', 'g'), new RecipeIngredientItem('ç‰ç±³ç²‰', '100', 'g'), new RecipeIngredientItem('èœ‚èœœ', '20', 'ml')],
      ['éº¸çš®ç‰ç±³ç²‰æ··åˆ', 'åŠ å…¥èœ‚èœœæ…æ‹Œ', 'åŠ æ°´è°ƒæˆè½¯é¥µ', 'é’“ä¸­å±‚æ•ˆæœå¥½'],
      ['å‘³å‹è¦é¦™ç”œ', 'é’“ä¸­å±‚', 'æ˜¥å¤æ•ˆæœå¥½'], 'é¦™ç”œ', 4, 4, 3, 3, 3);

    PresetRecipeDatabase.addRecipe('r_208', 'æ°´åº“å·¨é²¤é‡çªé¥µ', 'æ°´åº“å®ˆé’“å·¨é²¤ä¸“ç”¨ï¼Œé‡çªå®ˆå¤§ç‰©ã€‚', ['å·¨é²¤'], ['æ°´åº“'], ['æ˜¥ç§‹'],
      [new RecipeIngredientItem('å‘é…µç‰ç±³', '1000', 'g'), new RecipeIngredientItem('çº¢è–¯', '300', 'g'), new RecipeIngredientItem('è¯é…’', '100', 'ml')],
      ['å‘é…µç‰ç±³æå‰å‡†å¤‡', 'çº¢è–¯è’¸ç†Ÿæ£ç¢', 'åŠ å…¥è¯é…’æ…æ‹Œ', 'æ‰“é‡çªå®ˆé’“'],
      ['çªé‡è¦è¶³', 'å®ˆé’“éœ€è€å¿ƒ', 'å¤§ç‰©ä¸“ç”¨'], 'é…’é¦™', 5, 2, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_209', 'æ°´åº“é»„å°¾é²´é¥µ', 'æ°´åº“é’“é»„å°¾é²´ä¸“ç”¨ï¼Œåº•é’“æ•ˆæœå¥½ã€‚', ['é»„å°¾é²´'], ['æ°´åº“'], ['æ˜¥å¤'],
      [new RecipeIngredientItem('æ··åˆé¢—ç²’', '150', 'g'), new RecipeIngredientItem('éº¸çš®', '100', 'g'), new RecipeIngredientItem('èš¯èš“ç²‰', '30', 'g')],
      ['é¢—ç²’æ³¡è½¯', 'åŠ å…¥éº¸çš®æ··åˆ', 'èš¯èš“ç²‰å¢è…¥', 'è°ƒæˆè½¯é¥µåº•é’“'],
      ['åº•é’“æ•ˆæœå¥½', 'é¥µæ–™è¦è½¯', 'æ˜¥å¤æœ€ä½³'], 'è…¥é¦™', 4, 3, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_210', 'å—æ–¹é²®é±¼ä¸“ç”¨é¥µ', 'å—æ–¹æ°´åº“é’“é²®é±¼ä¸“ç”¨ï¼ŒèŠ±ç”Ÿç²‰æ˜¯é²®é±¼æœ€çˆ±ã€‚', ['é²®é±¼'], ['æ°´åº“'], ['å¤ç§‹'],
      [new RecipeIngredientItem('èŠ±ç”Ÿç²‰', '150', 'g'), new RecipeIngredientItem('éº¸çš®', '100', 'g'), new RecipeIngredientItem('ç‰ç±³ç²‰', '50', 'g')],
      ['èŠ±ç”Ÿç²‰éº¸çš®æ··åˆ', 'åŠ å…¥ç‰ç±³ç²‰', 'åŠ æ°´è°ƒæˆè½¯é¥µ', 'åº•é’“æ•ˆæœå¥½'],
      ['èŠ±ç”Ÿå‘³è¦è¶³', 'åº•é’“', 'å—æ–¹ç‰¹è‰²'], 'èŠ±ç”Ÿé¦™', 4, 3, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_211', 'æ°´åº“é»‘é²ˆè·¯äºšé¥µ', 'æ°´åº“è·¯äºšå¤§å£é»‘é²ˆä¸“ç”¨ï¼Œè½¯è™«æ•ˆæœæä½³ã€‚', ['å¤§å£é»‘é²ˆ'], ['æ°´åº“'], ['æ˜¥å¤ç§‹'],
      [new RecipeIngredientItem('è½¯è™«', 'é€‚é‡', ''), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['è½¯è™«ç»‘å¥½é’©ç»„', 'æŠ›æŠ•åˆ°éšœç¢åŒº', 'æ…¢é€Ÿæ‹–åŠ¨', 'æ„Ÿè§‰å’¬å£åæ‰¬ç«¿'],
      ['éšœç¢åŒºæ•ˆæœå¥½', 'æ…¢é€Ÿæ‹–åŠ¨', 'æ˜¥å¤ç§‹çš†å¯'], 'è·¯äºš', 5, 1, 5, 5, 4);

    PresetRecipeDatabase.addRecipe('r_212', 'æ°´åº“ç¿˜å˜´è·¯äºšé¥µ', 'æ°´åº“è·¯äºšç¿˜å˜´ä¸“ç”¨ï¼Œäº®ç‰‡æ•ˆæœæä½³ã€‚', ['ç¿˜å˜´'], ['æ°´åº“'], ['å¤ç§‹'],
      [new RecipeIngredientItem('äº®ç‰‡', '1', 'åª'), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['äº®ç‰‡ç»‘å¥½çº¿ç»„', 'æŠ›æŠ•åˆ°æ°´é¢', 'å¿«é€Ÿæ”¶çº¿', 'ç¿˜å˜´è¿½å’¬åæ‰¬ç«¿'],
      ['æ—©æ™šæ•ˆæœæœ€ä½³', 'æ°´é¢æœ‰é±¼èŠ±æ—¶ä½œé’“', 'æ”¶çº¿è¦å¿«'], 'è·¯äºš', 5, 1, 5, 5, 4);

    // æ¹–æ³Šé…æ–¹
    PresetRecipeDatabase.addRecipe('r_301', 'æ¹–æ³Šé²«é±¼ä¼ ç»Ÿé’“', 'æ¹–æ³Šä¼ ç»Ÿé’“é²«é±¼ç»å…¸é…æ–¹ï¼Œé…’ç±³æ‰“çªï¼Œèš¯èš“çº¢è™«æŒ‚é’©ã€‚', ['é²«é±¼'], ['æ¹–æ³Š'], ['å››å­£'],
      [new RecipeIngredientItem('é…’ç±³', '200', 'g'), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', '')],
      ['é…’ç±³æ‰“çªè¯±é±¼', 'èš¯èš“æˆ–çº¢è™«æŒ‚é’©', 'ä¸ƒæ˜Ÿæ¼‚è°ƒçµ', 'é€—é’“æ•ˆæœå¥½'],
      ['çªç‚¹è¦å‡†', 'é€—é’“å¢åŠ å’¬å£'], 'è…¥é¦™', 4, 3, 3, 4, 3);

    PresetRecipeDatabase.addRecipe('r_302', 'æ¹–æ³Šé²¤é±¼çˆ†ç‚¸é’©', 'æ¹–æ³Šæµ·ç«¿é’“é²¤é±¼ä¸“ç”¨ï¼Œç³ é¥¼ç‰ç±³æ•ˆæœå¥½ã€‚', ['é²¤é±¼'], ['æ¹–æ³Š'], ['å¤ç§‹'],
      [new RecipeIngredientItem('ç³ é¥¼', '500', 'g'), new RecipeIngredientItem('ç‰ç±³', '200', 'g'), new RecipeIngredientItem('éº¦ç²’', '100', 'g')],
      ['ç³ é¥¼æ³¡è½¯æç¢', 'ç‰ç±³éº¦ç²’æ··åˆ', 'è£…å…¥çˆ†ç‚¸é’©', 'æµ·ç«¿è¿œæŠ•å®ˆé’“'],
      ['è¿œæŠ•æ·±æ°´', 'å®ˆé’“è¦è€å¿ƒ', 'å¤ç§‹æ•ˆæœå¥½'], 'è°·é¦™', 4, 3, 4, 4, 5);

    PresetRecipeDatabase.addRecipe('r_303', 'æ¹–æ³Šè‰é±¼æµ®é’“é¥µ', 'æ¹–æ³Šæµ®é’“è‰é±¼ä¸“ç”¨ï¼Œå«©è‰èŠ¦è‹‡èŠ¯æ•ˆæœå¥½ã€‚', ['è‰é±¼'], ['æ¹–æ³Š'], ['å¤å­£'],
      [new RecipeIngredientItem('å«©è‰', 'é€‚é‡', ''), new RecipeIngredientItem('èŠ¦è‹‡èŠ¯', 'é€‚é‡', ''), new RecipeIngredientItem('ç‰ç±³ç²’', '100', 'g')],
      ['å«©è‰åˆ‡æ®µå¤‡ç”¨', 'èŠ¦è‹‡èŠ¯å–å«©å¿ƒ', 'ç‰ç±³ç²’æ‰“çª', 'è‰æ®µæŒ‚é’©æµ®é’“'],
      ['è‰è¦æ–°é²œ', 'æµ®é’“ä¸­ä¸Šå±‚', 'æ—©æ™šæ•ˆæœå¥½'], 'è‰é¦™', 3, 4, 2, 3, 2);

    PresetRecipeDatabase.addRecipe('r_304', 'æ¹–æ³Šé³œé±¼æ´»é¥µ', 'æ¹–æ³Šé’“é³œé±¼ä¸“ç”¨ï¼Œæ´»é¥µæ˜¯é³œé±¼æœ€çˆ±ã€‚', ['é³œé±¼'], ['æ¹–æ³Š'], ['å¤ç§‹'],
      [new RecipeIngredientItem('æ´»æ³¥é³…', 'é€‚é‡', ''), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['æ´»æ³¥é³…æŒ‚é’©', 'æ´»è™¾å¤‡ç”¨', 'å°é±¼æ‰“çª', 'éšœç¢åŒºå®ˆé’“'],
      ['éšœç¢åŒºæ•ˆæœå¥½', 'æ´»é¥µè¦é²œæ´»', 'å¤ç§‹æœ€ä½³'], 'æ´»é¥µ', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_305', 'æ¹–æ³Šé’é±¼èºè›³é¥µ', 'æ¹–æ³Šé’“é’é±¼ä¸“ç”¨ï¼Œèºè›³èšŒè‚‰æ•ˆæœæä½³ã€‚', ['é’é±¼'], ['æ¹–æ³Š'], ['å¤ç§‹'],
      [new RecipeIngredientItem('ç”°èº', '500', 'g'), new RecipeIngredientItem('èºè›³ç²‰', '100', 'g'), new RecipeIngredientItem('èšŒè‚‰', '200', 'g')],
      ['ç”°èºç ¸ç¢æ‰“çª', 'èºè›³ç²‰æ‹Œé¥µ', 'èšŒè‚‰åˆ‡å—æŒ‚é’©', 'åº•é’“å®ˆå¤§ç‰©'],
      ['èºè›³è¦æ–°é²œ', 'é’©è¦å¤§å·', 'å®ˆé’“è¦è€å¿ƒ'], 'è…¥é¦™', 5, 2, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_306', 'æ¹–æ³Šé»‘é±¼é›·è›™', 'æ¹–æ³Šè·¯äºšé»‘é±¼ä¸“ç”¨ï¼Œé›·è›™æ•ˆæœæä½³ã€‚', ['é»‘é±¼'], ['æ¹–æ³Š'], ['å¤å­£'],
      [new RecipeIngredientItem('é›·è›™', '1', 'åª'), new RecipeIngredientItem('è½¯è™«', 'é€‚é‡', ''), new RecipeIngredientItem('æ³¥é³…', 'é€‚é‡', '')],
      ['é›·è›™ç»‘å¥½çº¿ç»„', 'æŠ›æŠ•åˆ°è‰è¾¹', 'æ¨¡æ‹Ÿé’è›™è·³åŠ¨', 'é»‘é±¼ç‚¸æ°´åæ‰¬ç«¿'],
      ['è‰è¾¹æ•ˆæœå¥½', 'æ—©æ™šæœ€ä½³', 'æ‰¬ç«¿è¦æœ‰åŠ›'], 'è·¯äºš', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_307', 'åŒ—æ–¹ç‹—é±¼é¥µ', 'åŒ—æ–¹æ¹–æ³Šè·¯äºšç‹—é±¼ä¸“ç”¨ï¼Œå¤§å‹æ‹Ÿé¥µæ•ˆæœå¥½ã€‚', ['ç‹—é±¼'], ['æ¹–æ³Š'], ['æ˜¥ç§‹å†¬'],
      [new RecipeIngredientItem('å¤§å‹è½¯è™«', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', ''), new RecipeIngredientItem('äº®ç‰‡', '1', 'åª')],
      ['å¤§å‹è½¯è™«ç»‘é’©', 'æŠ›æŠ•åˆ°æ·±æ°´', 'æ…¢é€Ÿæ‹–åŠ¨', 'æ„Ÿè§‰å’¬å£åæ‰¬ç«¿'],
      ['æ·±æ°´æ•ˆæœå¥½', 'ç”¨å¤§å·æ‹Ÿé¥µ', 'ç§‹å†¬æœ€ä½³'], 'è·¯äºš', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_308', 'æ¹–é’“é²ˆé±¼é¥µ', 'æ¹–æ³Šé’“é²ˆé±¼ä¸“ç”¨ï¼Œæ´»é¥µæ•ˆæœå¥½ã€‚', ['é²ˆé±¼'], ['æ¹–æ³Š'], ['æ˜¥ç§‹'],
      [new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', ''), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', '')],
      ['æ´»è™¾æŒ‚é’©', 'å°é±¼æ‰“çª', 'èš¯èš“å¤‡ç”¨', 'éšœç¢åŒºä½œé’“'],
      ['éšœç¢åŒºæ•ˆæœå¥½', 'æ´»é¥µè¦é²œæ´»', 'æ˜¥ç§‹æœ€ä½³'], 'è…¥é¦™', 4, 2, 4, 4, 4);

    PresetRecipeDatabase.addRecipe('r_309', 'é“¶é±¼ä¸“ç”¨é¥µ', 'æ¹–æ³Šé’“é“¶é±¼ä¸“ç”¨ï¼Œç»†çº¿å°é’©æ•ˆæœå¥½ã€‚', ['é“¶é±¼'], ['æ¹–æ³Š'], ['æ˜¥ç§‹'],
      [new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', ''), new RecipeIngredientItem('å°è™«', 'é€‚é‡', '')],
      ['çº¢è™«å•æ¡æŒ‚é’©', 'å°è™«å¤‡ç”¨', 'ç”¨æç»†çº¿ç»„', 'è½»ææ…¢æ”¾'],
      ['ç”¨æç»†çº¿', 'å°é’©', 'åŠ¨ä½œè¦è½»'], 'è…¥é¦™', 3, 1, 4, 3, 2);

    PresetRecipeDatabase.addRecipe('r_310', 'çº¢é³é²Œè·¯äºšé¥µ', 'æ¹–æ³Šè·¯äºšçº¢é³é²Œä¸“ç”¨ï¼Œäº®ç‰‡æ•ˆæœå¥½ã€‚', ['çº¢é³é²Œ'], ['æ¹–æ³Š'], ['å¤ç§‹'],
      [new RecipeIngredientItem('äº®ç‰‡', '1', 'åª'), new RecipeIngredientItem('æ´»è™¾', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['äº®ç‰‡ç»‘å¥½çº¿ç»„', 'æŠ›æŠ•åˆ°æ°´é¢', 'å¿«é€Ÿæ”¶çº¿', 'æ„Ÿè§‰å’¬å£åæ‰¬ç«¿'],
      ['æ—©æ™šæ•ˆæœå¥½', 'æ”¶çº¿è¦å¿«', 'å¤ç§‹æœ€ä½³'], 'è·¯äºš', 4, 1, 4, 4, 3);

    PresetRecipeDatabase.addRecipe('r_311', 'æ¹–æ³Šç”²é±¼é¥µ', 'æ¹–æ³Šå¤œé’“ç”²é±¼ä¸“ç”¨ï¼ŒåŠ¨ç‰©å†…è„æ•ˆæœå¥½ã€‚', ['ç”²é±¼'], ['æ¹–æ³Š'], ['å¤å­£'],
      [new RecipeIngredientItem('é¸¡è‚', '200', 'g'), new RecipeIngredientItem('çŒªè‚', '100', 'g'), new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', '')],
      ['é¸¡è‚çŒªè‚åˆ‡å—', 'èš¯èš“ç©¿é’©', 'å†…è„æ‰“çª', 'å¤œé’“å®ˆå€™'],
      ['å¤œé’“æ•ˆæœå¥½', 'å†…è„è¦æ–°é²œ', 'é’©è¦é”‹åˆ©'], 'è¡€è…¥', 5, 1, 5, 5, 5);

    PresetRecipeDatabase.addRecipe('r_312', 'æ¹–æ³Šé»„é³é¥µ', 'æ¹–æ³Šå¤œé’“é»„é³ä¸“ç”¨ï¼Œèš¯èš“æ•ˆæœæœ€ä½³ã€‚', ['é»„é³'], ['æ¹–æ³Š'], ['å¤å­£'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('å°é±¼', 'é€‚é‡', '')],
      ['èš¯èš“ç©¿é’©', 'æ‰¾æ´ç©´ä½œé’“', 'å¤œé’“æ•ˆæœå¥½', 'è½»ææ…¢æ”¾'],
      ['æ´ç©´åŒºæ•ˆæœå¥½', 'å¤œé’“æœ€ä½³', 'åŠ¨ä½œè¦è½»'], 'è…¥é¦™', 4, 1, 5, 4, 3);

    PresetRecipeDatabase.addRecipe('r_313', 'ç§‹å­£æ²³èŸ¹é¥µ', 'ç§‹å­£æ¹–æ³Šé’“æ²³èŸ¹ä¸“ç”¨ï¼ŒåŠ¨ç‰©å†…è„æ•ˆæœå¥½ã€‚', ['æ²³èŸ¹'], ['æ¹–æ³Š'], ['ç§‹å­£'],
      [new RecipeIngredientItem('é¸¡è‚', '200', 'g'), new RecipeIngredientItem('é±¼è‚‰', '100', 'g'), new RecipeIngredientItem('ç‰ç±³', '100', 'g')],
      ['é¸¡è‚é±¼è‚‰åˆ‡å—', 'ç‰ç±³å¤‡ç”¨', 'è£…å…¥èŸ¹ç¬¼', 'å‚æ™šä¸‹ç¬¼æ—©æ™¨æ”¶'],
      ['ç§‹å­£æ•ˆæœæœ€ä½³', 'å‚æ™šä¸‹ç¬¼', 'å†…è„è¦æ–°é²œ'], 'è…¥é¦™', 4, 1, 5, 5, 4);

    PresetRecipeDatabase.addRecipe('r_314', 'æ¹–æ³Šæ²³è™¾é¥µ', 'æ¹–æ³Šé’“æ²³è™¾ä¸“ç”¨ï¼Œèš¯èš“çº¢è™«æ•ˆæœå¥½ã€‚', ['æ²³è™¾'], ['æ¹–æ³Š'], ['å¤ç§‹'],
      [new RecipeIngredientItem('èš¯èš“', 'é€‚é‡', ''), new RecipeIngredientItem('çº¢è™«', 'é€‚é‡', ''), new RecipeIngredientItem('é¢ç²‰', '50', 'g')],
      ['èš¯èš“çº¢è™«è£…ç¬¼', 'é¢ç²‰è°ƒç³Šè¯±è™¾', 'å‚æ™šä¸‹ç¬¼', 'æ—©æ™¨æ”¶ç¬¼'],
      ['å‚æ™šä¸‹ç¬¼', 'æµ…æ°´åŒºæ•ˆæœå¥½', 'å¤ç§‹æœ€ä½³'], 'è…¥é¦™', 3, 1, 4, 3, 3);

    PresetRecipeDatabase.addRecipe('r_315', 'æ¹–æ³Šé³Šé±¼ç´ é¥µ', 'æ¹–æ³Šæµ®é’“é³Šé±¼ä¸“ç”¨ï¼Œé¦™ç”œå‘³å‹æ•ˆæœå¥½ã€‚', ['é³Šé±¼'], ['æ¹–æ³Š'], ['æ˜¥å¤'],
      [new RecipeIngredientItem('éº¸çš®', '150', 'g'), new RecipeIngredientItem('ç‰ç±³ç²‰', '100', 'g'), new RecipeIngredientItem('æ‹‰ä¸ç²‰', '30', 'g')],
      ['éº¸çš®ç‰ç±³ç²‰æ··åˆ', 'åŠ å…¥æ‹‰ä¸ç²‰', 'åŠ æ°´è°ƒæˆè½¯é¥µ', 'æµ®é’“ä¸­å±‚'],
      ['å‘³å‹è¦é¦™ç”œ', 'æµ®é’“ä¸­å±‚', 'æ˜¥å¤æ•ˆæœå¥½'], 'é¦™ç”œ', 4, 4, 3, 3, 3);

    PresetRecipeDatabase.initialized = true;
  }

  private static addRecipe(id: string, name: string, desc: string, fish: string[], water: string[], season: string[],
    ings: RecipeIngredientItem[], steps: string[], tips: string[], flavor: string, intensity: number,
    atom: number, visc: number, hook: number, wt: number): void {
    const r = new RecipeDetailData();
    r.id = id;
    r.name = name;
    r.description = desc;
    r.targetFish = fish;
    r.waterTypes = water;
    r.seasons = season;
    r.ingredients = ings;
    r.steps = steps;
    r.tips = tips;
    r.flavorPrimary = flavor;
    r.flavorIntensity = intensity;
    r.atomization = atom;
    r.viscosity = visc;
    r.hookHolding = hook;
    r.weight = wt;
    r.difficulty = ings.length <= 3 ? 'ç®€å•' : (ings.length <= 5 ? 'ä¸­ç­‰' : 'å¤æ‚');
    r.prepTime = ings.length <= 3 ? '10åˆ†é’Ÿ' : '15åˆ†é’Ÿ';
    r.usageCount = Math.floor(Math.random() * 1000) + 500;
    r.reasons = [
      new RecommendReasonItem('é€‚åˆç›®æ ‡é±¼ç§', `é’ˆå¯¹${fish[0]}çš„é£Ÿæ€§ç‰¹ç‚¹è®¾è®¡`),
      new RecommendReasonItem('æ°´åŸŸé€‚é…', `é€‚åˆ${water[0]}ç¯å¢ƒä½¿ç”¨`),
      new RecommendReasonItem('å­£èŠ‚åŒ¹é…', `${season[0]}ä½¿ç”¨æ•ˆæœæœ€ä½³`)
    ];
    PresetRecipeDatabase.recipes.set(id, r);
  }

  static getRecipe(id: string): RecipeDetailData | null {
    PresetRecipeDatabase.initialize();
    const recipe = PresetRecipeDatabase.recipes.get(id);
    return recipe !== undefined ? recipe : null;
  }
}


@Entry
@Component
struct RecipeDetailPage {
  @State recipe: RecipeDetailData = new RecipeDetailData();
  @State isFavorite: boolean = false;
  @State currentTab: number = 0;
  @State isLoading: boolean = true;

  private tabTitles: string[] = ['æ¦‚è§ˆ', 'é…æ–™', 'æ­¥éª¤'];

  aboutToAppear(): void {
    this.loadRecipeData();
  }

  // åˆ‡æ¢æ”¶è—çŠ¶æ€
  private async toggleFavorite(): Promise<void> {
    if (!this.recipe.id) return;

    // æ‰€æœ‰é…æ–¹ï¼ˆåŒ…æ‹¬ç”¨æˆ·é…æ–¹ï¼‰éƒ½å¯ä»¥åˆ‡æ¢æ”¶è—çŠ¶æ€
    this.isFavorite = await userDataService.toggleFavorite(this.recipe.id);
    console.info('[RecipeDetailPage] toggleFavorite:', this.recipe.id, 'new state:', this.isFavorite);
  }

  // åˆ é™¤ç”¨æˆ·é…æ–¹
  private async deleteUserRecipe(): Promise<void> {
    if (!this.recipe.id || !this.recipe.isUserRecipe) return;

    // å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
    AlertDialog.show({
      title: 'åˆ é™¤é…æ–¹',
      message: `ç¡®å®šè¦åˆ é™¤ã€Œ${this.recipe.name}ã€å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,
      primaryButton: {
        value: 'å–æ¶ˆ',
        action: () => {}
      },
      secondaryButton: {
        value: 'åˆ é™¤',
        fontColor: '#F44336',
        action: async () => {
          const success = await userDataService.deleteRecipe(this.recipe.id);
          if (success) {
            Router.back();
          }
        }
      }
    });
  }

  // åŠ è½½é…æ–¹æ•°æ®
  private async loadRecipeData(): Promise<void> {
    try {
      // å¼ºåˆ¶é‡æ–°åŠ è½½ï¼Œç¡®ä¿è·å–æœ€æ–°çš„æ”¶è—çŠ¶æ€
      await userDataService.load(true);
      const params = router.getParams();
      if (params) {
        const p = params as Record<string, Object>;
        const recipeId = p.recipeId as string;

        if (recipeId) {
          // æ£€æŸ¥æ”¶è—çŠ¶æ€
          this.isFavorite = userDataService.isFavorite(recipeId);

          // åˆ¤æ–­æ˜¯ç”¨æˆ·é…æ–¹è¿˜æ˜¯é¢„è®¾é…æ–¹
          if (recipeId.startsWith('user_recipe_')) {
            await this.loadUserRecipe(recipeId);
          } else {
            this.loadPresetRecipe(recipeId);
          }
        }
      }
    } catch (err) {
      console.error('Load recipe failed:', err);
    }
    this.isLoading = false;
  }

  // åŠ è½½ç”¨æˆ·ä¿å­˜çš„é…æ–¹
  private async loadUserRecipe(recipeId: string): Promise<void> {
    const userRecipes = userDataService.getCustomRecipes();

    for (let i = 0; i < userRecipes.length; i++) {
      if (userRecipes[i].id === recipeId) {
        const ur = userRecipes[i];
        this.recipe = this.convertUserRecipe(ur);
        // ç”¨æˆ·é…æ–¹çš„æ”¶è—çŠ¶æ€ä¹Ÿä»æ”¶è—åˆ—è¡¨è¯»å–ï¼ˆä¸å†å¼ºåˆ¶ä¸ºtrueï¼‰
        // isFavorite å·²ç»åœ¨ loadRecipeData ä¸­è®¾ç½®è¿‡äº†
        return;
      }
    }
  }

  // è½¬æ¢ç”¨æˆ·é…æ–¹ä¸ºè¯¦æƒ…æ ¼å¼
  private convertUserRecipe(ur: CustomRecipe): RecipeDetailData {
    const r = new RecipeDetailData();
    r.id = ur.id;
    r.name = ur.name;
    r.isUserRecipe = true;

    // ç›®æ ‡é±¼ç§
    r.targetFish = ur.targetFish.map((fishId: string) => this.getFishNameById(fishId));

    // æ°´åŸŸç±»å‹
    r.waterTypes = [this.getWaterTypeName(ur.waterType)];

    // å­£èŠ‚
    r.seasons = [this.getSeasonName(ur.season)];

    // é…æ–™ - ä½¿ç”¨ä¿å­˜çš„å®Œæ•´ä¿¡æ¯
    r.ingredients = [];
    for (let i = 0; i < ur.ingredients.length; i++) {
      const ing = ur.ingredients[i];
      // ä¼˜å…ˆä½¿ç”¨é‡é‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨æ¯”ä¾‹
      const amount = ing.weight > 0 ? `${ing.weight}` : `${ing.ratio}`;
      const unit = ing.weight > 0 ? 'g' : '%';
      r.ingredients.push(new RecipeIngredientItem(ing.name, amount, unit));
    }

    // æ­¥éª¤
    r.steps = ur.steps.slice();

    // æŠ€å·§
    if (ur.tips.length > 0) {
      r.tips = ur.tips.split('ï¼›');
    }

    // æè¿°
    const fishNames = r.targetFish.join('ã€');
    const waterName = r.waterTypes[0];
    const seasonName = r.seasons[0];
    r.description = `${seasonName}${waterName}é’“${fishNames}çš„è‡ªå®šä¹‰é…æ–¹ã€‚`;

    // éš¾åº¦å’Œæ—¶é—´
    r.difficulty = ur.ingredients.length <= 3 ? 'ç®€å•' : (ur.ingredients.length <= 5 ? 'ä¸­ç­‰' : 'å¤æ‚');
    r.prepTime = ur.ingredients.length <= 3 ? '10åˆ†é’Ÿ' : '15åˆ†é’Ÿ';

    // çŠ¶æ€ç‰¹æ€§ - ä½¿ç”¨ä¿å­˜çš„æ•°æ®
    if (ur.stateProfile) {
      r.atomization = ur.stateProfile.atomization;
      r.viscosity = ur.stateProfile.viscosity;
      r.hookHolding = ur.stateProfile.hookHolding;
      r.weight = ur.stateProfile.weight;
    } else {
      r.atomization = 3;
      r.viscosity = 3;
      r.hookHolding = 3;
      r.weight = 3;
    }

    // å‘³å‹ç‰¹æ€§ - ä½¿ç”¨ä¿å­˜çš„æ•°æ®
    if (ur.flavorProfile) {
      // åªæ˜¾ç¤ºä¸»å‘³å‹ï¼Œå‰¯å‘³å‹å•ç‹¬å¤„ç†
      r.flavorPrimary = ur.flavorProfile.primary || 'ç»¼åˆ';
      r.flavorIntensity = ur.flavorProfile.intensity || 3;
      r.suitableTemp = ur.flavorProfile.suitableTemp || '15-25Â°C';
    } else {
      r.flavorPrimary = 'ç»¼åˆ';
      r.flavorIntensity = 3;
      r.suitableTemp = '15-25Â°C';
    }

    r.rating = 4.5;
    r.usageCount = 0;

    // æ¨èç†ç”±
    r.reasons = [
      new RecommendReasonItem('æˆ‘çš„é…æ–¹', 'æ ¹æ®ä¸ªäººç»éªŒå®šåˆ¶'),
      new RecommendReasonItem('ç›®æ ‡é±¼ç§', `é’ˆå¯¹${fishNames}è®¾è®¡`),
      new RecommendReasonItem('é€‚ç”¨åœºæ™¯', `${seasonName}${waterName}ä½¿ç”¨`)
    ];

    return r;
  }

  // åŠ è½½é¢„è®¾é…æ–¹
  private loadPresetRecipe(recipeId: string): void {
    const preset = PresetRecipeDatabase.getRecipe(recipeId);
    if (preset !== null) {
      this.recipe = preset;
    } else {
      // å¦‚æœæ‰¾ä¸åˆ°é¢„è®¾é…æ–¹ï¼Œæ˜¾ç¤ºé»˜è®¤æ•°æ®
      this.recipe = this.getDefaultRecipe(recipeId);
    }
  }

  // è·å–é»˜è®¤é…æ–¹ï¼ˆå½“æ‰¾ä¸åˆ°é…æ–¹æ—¶ï¼‰
  private getDefaultRecipe(recipeId: string): RecipeDetailData {
    const r = new RecipeDetailData();
    r.id = recipeId;
    r.name = 'é…æ–¹è¯¦æƒ…';
    r.description = 'æš‚æ— é…æ–¹è¯¦æƒ…ä¿¡æ¯';
    r.targetFish = ['é²«é±¼'];
    r.waterTypes = ['æ± å¡˜'];
    r.seasons = ['å››å­£'];
    r.ingredients = [new RecipeIngredientItem('åŸºç¡€é¥µ', '100', 'g')];
    r.steps = ['æŒ‰é…æ–¹æ¯”ä¾‹æ··åˆ', 'åŠ æ°´æ…æ‹Œ', 'é™ç½®åä½¿ç”¨'];
    r.tips = ['æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´'];
    r.reasons = [new RecommendReasonItem('é€šç”¨é…æ–¹', 'é€‚åˆå¤šç§åœºæ™¯')];
    return r;
  }

  // è¾…åŠ©æ–¹æ³•ï¼šè·å–é±¼ç§åç§°
  private getFishNameById(fishId: string): string {
    const fishMap: Map<string, string> = new Map([
      ['crucian', 'é²«é±¼'], ['carp', 'é²¤é±¼'], ['grass', 'è‰é±¼'],
      ['black', 'é’é±¼'], ['black_carp', 'é’é±¼'], ['catfish', 'é²¶é±¼'],
      ['bighead', 'é³™é±¼'], ['silver', 'é²¢é±¼'], ['tilapia', 'ç½—éé±¼'],
      ['grass_carp', 'è‰é±¼'], ['silver_carp', 'é²¢é±¼'], ['bighead_carp', 'é³™é±¼'],
      ['yellow_catfish', 'é»„é¢¡é±¼'], ['mandarin_fish', 'é³œé±¼'], ['snakehead', 'é»‘é±¼'],
      ['bream', 'é³Šé±¼'], ['topmouth_culter', 'ç¿˜å˜´']
    ]);
    const name = fishMap.get(fishId);
    return name !== undefined ? name : fishId;
  }

  // è¾…åŠ©æ–¹æ³•ï¼šè·å–æ°´åŸŸåç§°
  private getWaterTypeName(waterType: string): string {
    if (waterType === 'river') return 'æ²³æµ';
    if (waterType === 'pond') return 'æ± å¡˜';
    if (waterType === 'reservoir') return 'æ°´åº“';
    if (waterType === 'wild_pond') return 'é‡å¡˜';
    if (waterType === 'lake') return 'æ¹–æ³Š';
    return waterType;
  }

  // è¾…åŠ©æ–¹æ³•ï¼šè·å–å­£èŠ‚åç§°
  private getSeasonName(season: string): string {
    if (season === 'spring') return 'æ˜¥å­£';
    if (season === 'summer') return 'å¤å­£';
    if (season === 'autumn') return 'ç§‹å­£';
    if (season === 'winter') return 'å†¬å­£';
    return season;
  }


  build() {
    Column() {
      this.HeaderBar()

      if (this.isLoading) {
        Column() {
          LoadingProgress().width(40).height(40)
          Text('åŠ è½½ä¸­...').fontSize(14).fontColor(ThemeColors.TEXT_SECONDARY).margin({ top: 12 })
        }.width('100%').layoutWeight(1).justifyContent(FlexAlign.Center)
      } else {
        Scroll() {
          Column({ space: 0 }) {
            this.RecipeHeader()
            this.TabNavigation()

            if (this.currentTab === 0) {
              this.OverviewContent()
            } else if (this.currentTab === 1) {
              this.IngredientsContent()
            } else {
              this.StepsContent()
            }
          }
          .width('100%')
          .padding({ bottom: 100 })
        }
        .layoutWeight(1)
        .scrollBar(BarState.Off)
      }
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#FFFBF5')
  }

  @Builder
  HeaderBar() {
    Row() {
      Row() {
        Text('â†')
          .fontSize(22)
          .fontColor(ThemeColors.TEXT_PRIMARY)
      }
      .width(40)
      .height(40)
      .justifyContent(FlexAlign.Center)
      .onClick(() => Router.back())

      Blank()

      Text('é…æ–¹è¯¦æƒ…')
        .fontSize(18)
        .fontWeight(FontWeight.Medium)
        .fontColor(ThemeColors.TEXT_PRIMARY)

      Blank()

      // æ‰€æœ‰é…æ–¹éƒ½æ˜¾ç¤ºæ”¶è—æŒ‰é’®
      Row() {
        Text(this.isFavorite ? 'â™¥' : 'â™¡')
          .fontSize(22)
          .fontColor(this.isFavorite ? '#F44336' : ThemeColors.TEXT_PRIMARY)
      }
      .width(40)
      .height(40)
      .justifyContent(FlexAlign.Center)
      .onClick(() => { this.toggleFavorite(); })
    }
    .width('100%')
    .height(56)
    .padding({ left: 8, right: 8 })
    .margin({ top: 44 })
  }

  @Builder
  RecipeHeader() {
    Column({ space: 12 }) {
      Row() {
        Column({ space: 4 }) {
          if (this.recipe.isUserRecipe) {
            Row({ space: 4 }) {
              Text('â­').fontSize(12)
              Text('æˆ‘çš„é…æ–¹').fontSize(12).fontColor(ThemeColors.PRIMARY)
            }
            .padding({ left: 8, right: 8, top: 4, bottom: 4 })
            .backgroundColor('rgba(232, 168, 73, 0.15)')
            .borderRadius(10)
          }
          Text(this.recipe.name)
            .fontSize(22)
            .fontWeight(FontWeight.Bold)
            .fontColor(ThemeColors.TEXT_PRIMARY)
        }
        .alignItems(HorizontalAlign.Start)
        .layoutWeight(1)

        Row({ space: 4 }) {
          Text('â˜†').fontSize(18).fontColor(ThemeColors.PRIMARY)
          Text(this.recipe.rating.toFixed(1))
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor(ThemeColors.PRIMARY)
        }
      }
      .width('100%')

      Text(this.recipe.description)
        .fontSize(14)
        .fontColor(ThemeColors.TEXT_SECONDARY)
        .lineHeight(20)

      Row({ space: 16 }) {
        this.InfoTag('â±ï¸', this.recipe.prepTime)
        this.InfoTag('ğŸ“Š', this.recipe.difficulty)
        this.InfoTag('ğŸ‘¥', this.recipe.isUserRecipe ? 'æˆ‘çš„é…æ–¹' : `${this.recipe.usageCount}äººä½¿ç”¨`)
      }
    }
    .width('100%')
    .padding({ left: 20, right: 20, top: 16, bottom: 20 })
    .alignItems(HorizontalAlign.Start)
  }

  @Builder
  InfoTag(icon: string, text: string) {
    Row({ space: 4 }) {
      Text(icon).fontSize(12)
      Text(text).fontSize(12).fontColor(ThemeColors.TEXT_SECONDARY)
    }
    .padding({ left: 10, right: 10, top: 6, bottom: 6 })
    .backgroundColor(Color.White)
    .borderRadius(16)
  }

  @Builder
  TabNavigation() {
    Row({ space: 0 }) {
      ForEach(this.tabTitles, (title: string, index: number) => {
        Column() {
          Text(title)
            .fontSize(16)
            .fontWeight(FontWeight.Medium)
            .fontColor(this.currentTab === index ? ThemeColors.PRIMARY : '#999999')
        }
        .layoutWeight(1)
        .height(44)
        .justifyContent(FlexAlign.Center)
        .backgroundColor(this.currentTab === index ? Color.White : Color.Transparent)
        .borderRadius(22)
        .onClick(() => { this.currentTab = index; })
      })
    }
    .width('100%')
    .height(52)
    .padding({ left: 20, right: 20 })
    .backgroundColor(Color.White)
  }


  // ========== æ¦‚è§ˆTab ==========
  @Builder
  OverviewContent() {
    Column({ space: 16 }) {
      this.TagsCard()
      this.FlavorCard()
      this.StateCard()
      this.ReasonsCard()
    }
    .width('100%')
    .padding({ left: 20, right: 20, top: 16 })
  }

  @Builder
  TagsCard() {
    Column({ space: 12 }) {
      Row({ space: 12 }) {
        Row({ space: 4 }) {
          Text('ğŸŸ').fontSize(14)
          Text('ç›®æ ‡é±¼ç§').fontSize(14).fontColor(ThemeColors.TEXT_SECONDARY)
        }.width(90)

        Row({ space: 8 }) {
          ForEach(this.recipe.targetFish, (fish: string) => {
            Text(fish)
              .fontSize(13)
              .fontColor(ThemeColors.PRIMARY)
              .padding({ left: 12, right: 12, top: 6, bottom: 6 })
              .borderRadius(16)
              .border({ width: 1, color: ThemeColors.PRIMARY })
          })
        }
      }.width('100%')

      Row({ space: 12 }) {
        Row({ space: 4 }) {
          Text('ğŸ’§').fontSize(14)
          Text('é€‚ç”¨æ°´åŸŸ').fontSize(14).fontColor(ThemeColors.TEXT_SECONDARY)
        }.width(90)

        Row({ space: 8 }) {
          ForEach(this.recipe.waterTypes, (water: string) => {
            Text(water)
              .fontSize(13)
              .fontColor(ThemeColors.TEXT_PRIMARY)
              .padding({ left: 12, right: 12, top: 6, bottom: 6 })
              .backgroundColor(ThemeColors.BG_TERTIARY)
              .borderRadius(16)
          })
        }
      }.width('100%')

      Row({ space: 12 }) {
        Row({ space: 4 }) {
          Text('ğŸ‚').fontSize(14)
          Text('é€‚ç”¨å­£èŠ‚').fontSize(14).fontColor(ThemeColors.TEXT_SECONDARY)
        }.width(90)

        Row({ space: 8 }) {
          ForEach(this.recipe.seasons, (season: string) => {
            Text(season)
              .fontSize(13)
              .fontColor(ThemeColors.TEXT_PRIMARY)
              .padding({ left: 12, right: 12, top: 6, bottom: 6 })
              .backgroundColor(ThemeColors.BG_TERTIARY)
              .borderRadius(16)
          })
        }
      }.width('100%')
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  @Builder
  FlavorCard() {
    Column({ space: 16 }) {
      Text('å‘³å‹ç‰¹ç‚¹').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)

      Row() {
        Column({ space: 4 }) {
          Text('ä¸»å‘³å‹').fontSize(12).fontColor(ThemeColors.TEXT_MUTED)
          Text(this.getFlavorName(this.recipe.flavorPrimary))
            .fontSize(20)
            .fontWeight(FontWeight.Bold)
            .fontColor(ThemeColors.PRIMARY)
        }.layoutWeight(1)

        Column({ space: 4 }) {
          Text('æµ“åº¦').fontSize(12).fontColor(ThemeColors.TEXT_MUTED)
          Row({ space: 3 }) {
            ForEach([1, 2, 3, 4, 5], (i: number) => {
              Circle()
                .width(8)
                .height(8)
                .fill(i <= this.recipe.flavorIntensity ? ThemeColors.PRIMARY : '#E5E5E5')
            })
          }
        }.layoutWeight(1)

        Column({ space: 4 }) {
          Text('é€‚ç”¨æ°´æ¸©').fontSize(12).fontColor(ThemeColors.TEXT_MUTED)
          Text(this.recipe.suitableTemp).fontSize(16).fontColor(ThemeColors.TEXT_PRIMARY)
        }.layoutWeight(1)
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .alignItems(HorizontalAlign.Start)
  }

  // è·å–å‘³å‹ä¸­æ–‡åç§°
  private getFlavorName(flavorId: string): string {
    const flavorNames: Record<string, string> = {
      'fishy': 'è…¥',
      'fragrant': 'é¦™',
      'sweet': 'ç”œ',
      'sour': 'é…¸',
      'smelly': 'è‡­',
      'plain': 'æœ¬å‘³',
      'è…¥': 'è…¥',
      'é¦™': 'é¦™',
      'ç”œ': 'ç”œ',
      'é…¸': 'é…¸',
      'è‡­': 'è‡­',
      'æœ¬å‘³': 'æœ¬å‘³'
    };
    return flavorNames[flavorId] || flavorId || 'æœªçŸ¥';
  }

  @Builder
  StateCard() {
    Column({ space: 16 }) {
      Text('çŠ¶æ€ç‰¹æ€§').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)

      Row() {
        this.StateItem('é›¾åŒ–', this.recipe.atomization)
        this.StateItem('ç²˜åº¦', this.recipe.viscosity)
        this.StateItem('æŒé’©', this.recipe.hookHolding)
        this.StateItem('æ¯”é‡', this.recipe.weight)
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .alignItems(HorizontalAlign.Start)
  }

  @Builder
  StateItem(label: string, value: number) {
    Column({ space: 8 }) {
      Text(label).fontSize(12).fontColor(ThemeColors.TEXT_MUTED)
      Stack({ alignContent: Alignment.Start }) {
        Row().width('100%').height(6).borderRadius(3).backgroundColor('#F0F0F0')
        Row().width(`${value * 20}%`).height(6).borderRadius(3).backgroundColor(ThemeColors.PRIMARY)
      }.width('100%')
      Text(`${value}/5`).fontSize(11).fontColor(ThemeColors.TEXT_MUTED)
    }
    .layoutWeight(1)
    .padding({ left: 4, right: 4 })
  }

  @Builder
  ReasonsCard() {
    Column({ space: 12 }) {
      Text('ä¸ºä»€ä¹ˆæ¨è').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)

      ForEach(this.recipe.reasons, (reason: RecommendReasonItem, index: number) => {
        Row({ space: 12 }) {
          Row() {
            Text(`${index + 1}`).fontSize(12).fontColor(Color.White)
          }
          .width(24)
          .height(24)
          .borderRadius(12)
          .backgroundColor(ThemeColors.PRIMARY)
          .justifyContent(FlexAlign.Center)

          Column({ space: 2 }) {
            Text(reason.title).fontSize(14).fontColor(ThemeColors.TEXT_PRIMARY)
            Text(reason.description).fontSize(13).fontColor(ThemeColors.PRIMARY)
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1)
        }
        .width('100%')
        .padding(12)
        .backgroundColor('#FFF9F0')
        .borderRadius(8)
      })
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .alignItems(HorizontalAlign.Start)
  }


  // ========== é…æ–™Tab ==========
  @Builder
  IngredientsContent() {
    Column({ space: 16 }) {
      Row({ space: 8 }) {
        Text('ğŸ“¦').fontSize(18)
        Text('ææ–™æ¸…å•').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)
      }
      .width('100%')
      .padding({ left: 4 })

      Column({ space: 0 }) {
        ForEach(this.recipe.ingredients, (item: RecipeIngredientItem, index: number) => {
          Row() {
            Text(item.name).fontSize(15).fontColor(ThemeColors.TEXT_PRIMARY)
            Blank()
            Text(`${item.amount}${item.unit}`)
              .fontSize(15)
              .fontColor(ThemeColors.PRIMARY)
          }
          .width('100%')
          .padding({ top: 16, bottom: 16, left: 16, right: 16 })
          .border({
            width: { bottom: index < this.recipe.ingredients.length - 1 ? 1 : 0 },
            color: '#F5F5F5'
          })
        })
      }
      .width('100%')
      .backgroundColor(Color.White)
      .borderRadius(12)
    }
    .width('100%')
    .padding({ left: 20, right: 20, top: 16 })
  }

  // ========== æ­¥éª¤Tab ==========
  @Builder
  StepsContent() {
    Column({ space: 16 }) {
      Column({ space: 16 }) {
        Row({ space: 8 }) {
          Text('ğŸ“').fontSize(18)
          Text('åˆ¶ä½œæ­¥éª¤').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)
        }.width('100%')

        ForEach(this.recipe.steps, (step: string, index: number) => {
          Row({ space: 12 }) {
            Row() {
              Text(`${index + 1}`)
                .fontSize(14)
                .fontWeight(FontWeight.Medium)
                .fontColor(Color.White)
            }
            .width(28)
            .height(28)
            .borderRadius(14)
            .backgroundColor(ThemeColors.PRIMARY)
            .justifyContent(FlexAlign.Center)

            Text(step)
              .fontSize(14)
              .fontColor(ThemeColors.TEXT_PRIMARY)
              .lineHeight(20)
              .layoutWeight(1)
          }
          .width('100%')
          .padding({ top: 8, bottom: 8 })
          .alignItems(VerticalAlign.Top)
        })
      }
      .width('100%')
      .padding(16)
      .backgroundColor(Color.White)
      .borderRadius(12)
      .alignItems(HorizontalAlign.Start)

      Column({ space: 12 }) {
        Row({ space: 8 }) {
          Text('ğŸ’¡').fontSize(18)
          Text('ä½¿ç”¨æŠ€å·§').fontSize(16).fontWeight(FontWeight.Medium).fontColor(ThemeColors.TEXT_PRIMARY)
        }.width('100%')

        Column({ space: 8 }) {
          ForEach(this.recipe.tips, (tip: string) => {
            Row({ space: 8 }) {
              Text('â€¢').fontSize(14).fontColor(ThemeColors.PRIMARY)
              Text(tip)
                .fontSize(13)
                .fontColor(ThemeColors.TEXT_SECONDARY)
                .layoutWeight(1)
                .lineHeight(18)
            }.width('100%')
          })
        }
      }
      .width('100%')
      .padding(16)
      .backgroundColor('#FFF9F0')
      .borderRadius(12)
      .alignItems(HorizontalAlign.Start)
    }
    .width('100%')
    .padding({ left: 20, right: 20, top: 16 })
  }
}

/**
 * æ™ºèƒ½é…æ–¹ç”Ÿæˆç›¸å…³ç±»å‹å®šä¹‰
 */

// æ°´åŸŸç±»å‹
export type RecipeWaterType = 'river' | 'pond' | 'reservoir' | 'wild_pond';

// å­£èŠ‚
export type RecipeSeason = 'spring' | 'summer' | 'autumn' | 'winter';

// ä½œé’“æ–¹å¼
export type FishingMethod = 'rub' | 'pull' | 'scatter' | 'wrap';

// ç”Ÿæˆæ¨¡å¼
export type GenerateMode = 'conservative' | 'balanced' | 'aggressive';

// é±¼å¯†åº?
export type FishDensity = 'high' | 'medium' | 'low';

// å¼€å£æƒ…å†?
export type FishActivity = 'good' | 'normal' | 'poor';

// é…æ–¹åŸæ–™åˆ†ç±»
export type RecipeIngredientCategory = 'main' | 'auxiliary' | 'state' | 'additive';

// å‘³å‹ä¿®æ­£
export class FlavorModifier {
  fishy: number = 0;
  fragrant: number = 0;
  sweet: number = 0;
  sour: number = 0;
  stinky: number = 0;
  constructor() {}
  static create(fi: number, fr: number, sw: number, so: number, st: number): FlavorModifier {
    const m = new FlavorModifier();
    m.fishy = fi; m.fragrant = fr; m.sweet = sw; m.sour = so; m.stinky = st;
    return m;
  }
}

// çŠ¶æ€ä¿®æ­?
export class StateModifier {
  atomization: number = 0;
  viscosity: number = 0;
  intensity: number = 0;
  constructor() {}
  static create(atom: number, visc: number, inten: number): StateModifier {
    const m = new StateModifier();
    m.atomization = atom; m.viscosity = visc; m.intensity = inten;
    return m;
  }
}


// å­£èŠ‚ä¿®æ­£æ˜ å°„
export class SeasonModifierMap {
  spring: FlavorModifier = new FlavorModifier();
  summer: FlavorModifier = new FlavorModifier();
  autumn: FlavorModifier = new FlavorModifier();
  winter: FlavorModifier = new FlavorModifier();
  constructor() {}
}

// æ°´åŸŸä¿®æ­£æ˜ å°„
export class WaterModifierMap {
  river: StateModifier = new StateModifier();
  pond: StateModifier = new StateModifier();
  reservoir: StateModifier = new StateModifier();
  wild_pond: StateModifier = new StateModifier();
  constructor() {}
}

// æ¨èåŸæ–™
export class IngredientRecommend {
  main: string[] = [];
  auxiliary: string[] = [];
  state: string[] = [];
  additive: string[] = [];
  constructor() {}
}

// é±¼ç§é…æ–¹è§„åˆ™
export class FishRecipeRule {
  fishId: string = '';
  fishName: string = '';
  baseFlavor: FlavorModifier = new FlavorModifier();
  seasonModifier: SeasonModifierMap = new SeasonModifierMap();
  waterModifier: WaterModifierMap = new WaterModifierMap();
  recommendedIngredients: IngredientRecommend = new IngredientRecommend();
  constructor() {}
}

// æ¸©åº¦è§„åˆ™
export class TemperatureRule {
  minTemp: number = 0;
  maxTemp: number = 40;
  flavorModifier: FlavorModifier = new FlavorModifier();
  stateModifier: StateModifier = new StateModifier();
  description: string = '';
  constructor() {}
}

// ç”Ÿæˆé…æ–¹è¾“å…¥
export class GenerateRecipeInput {
  targetFishId: string = '';
  waterType: RecipeWaterType = 'river';
  temperature: number = 20;
  season: RecipeSeason = 'spring';
  fishDensity: FishDensity = 'medium';
  fishActivity: FishActivity = 'normal';
  fishingMethod: FishingMethod = 'rub';
  availableBaits: string[] = [];
  mode: GenerateMode = 'balanced';
  constructor() {}
}


// é…æ–¹åŸæ–™
export class RecipeIngredient {
  id: string = '';
  name: string = '';
  category: RecipeIngredientCategory = 'main';
  percentage: number = 0;
  weight: number = 0;
  purpose: string = '';
  constructor() {}
}

// å‘³å‹è¯´æ˜
export class FlavorDescription {
  primary: string = '';
  secondary: string = '';
  intensity: number = 5;
  suitableTemp: string = '';
  constructor() {}
}

// çŠ¶æ€ç‰¹æ€?
export class StateProfile {
  atomization: number = 3;
  viscosity: number = 3;
  hookHolding: number = 3;
  weight: number = 3;
  constructor() {}
}

// ä½¿ç”¨å»ºè®®
export class UsageSuggestion {
  waterRatio: string = '1:1';
  restTime: string = '5-10åˆ†é’Ÿ';
  firstCast: string = '';
  nestSuggestion: string = '';
  constructor() {}
}

// ç”Ÿæˆç†ç”±
export class GenerateReason {
  condition: string = '';
  decision: string = '';
  icon: string = '';
  constructor() {}
}

// ç”Ÿæˆçš„é…æ–?
export class GeneratedRecipe {
  id: string = '';
  name: string = '';
  ingredients: RecipeIngredient[] = [];
  totalWeight: number = 500;
  flavorProfile: FlavorDescription = new FlavorDescription();
  stateProfile: StateProfile = new StateProfile();
  usage: UsageSuggestion = new UsageSuggestion();
  reasons: GenerateReason[] = [];
  conditions: GenerateRecipeInput = new GenerateRecipeInput();
  createTime: number = 0;
  mode: string = 'balanced';
  constructor() {}
}

// é…æ–¹åé¦ˆ
export class RecipeFeedback {
  recipeId: string = '';
  rating: string = 'normal';
  note: string = '';
  createTime: number = 0;
  constructor() {}
}


// æ¨¡å¼ä¿®æ­£
export class ModeModifier {
  flavorScale: number = 1.0;
  atomizationBias: number = 0;
  constructor() {}
  static create(scale: number, bias: number): ModeModifier {
    const m = new ModeModifier();
    m.flavorScale = scale;
    m.atomizationBias = bias;
    return m;
  }
}

// ç†ç”±æ¨¡æ¿
export class ReasonTemplate {
  condition: string = '';
  decision: string = '';
  icon: string = '';
  constructor() {}
  static create(cond: string, dec: string, ic: string): ReasonTemplate {
    const t = new ReasonTemplate();
    t.condition = cond;
    t.decision = dec;
    t.icon = ic;
    return t;
  }
}

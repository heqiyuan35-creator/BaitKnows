/**
 * é±¼ç§æ•°æ®åº?
 * åŒ…å«å¸¸è§æ·¡æ°´é±¼å’Œæµ·æ°´é±¼çš„è¯¦ç»†æ•°æ®
 */
import {
  Fish,
  FlavorProfile,
  SeasonActivity,
  TemperatureRange,
  SeasonFlavorAdjust,
  SeasonalFlavorAdjustment,
  FishCategory
} from '../common/types/FishTypes';

function createCrucian(): Fish {
  const f = new Fish();
  f.id = 'crucian'; f.name = 'é²«é±¼'; f.scientificName = 'Carassius auratus';
  f.category = 'freshwater'; f.description = 'æœ€å¸¸è§çš„æ·¡æ°´é±¼ï¼Œåˆ†å¸ƒå¹¿æ³›ï¼Œå››å­£å¯é’“'; f.difficulty = 3;
  f.waterType.push('pond'); f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'bottom';
  f.habits.temperatureRange = TemperatureRange.create(5, 18, 30);
  f.habits.activeTime.push('dawn'); f.habits.activeTime.push('morning'); f.habits.activeTime.push('dusk');
  f.habits.seasonActivity = SeasonActivity.create(9, 7, 9, 5);
  f.habits.alertness = 7; f.habits.schooling = true; f.habits.feedingStyle = 'cautious';
  f.dietPreference.type = 'omnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(70, 60, 80, 20, 10, 50, 40, 30, 40);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'fragrant'), SeasonFlavorAdjust.create('fragrant', 'fruity'),
    SeasonFlavorAdjust.create('sweet', 'fragrant'), SeasonFlavorAdjust.create('fishy', 'sweet'));
  f.dietPreference.naturalFood.push('æ°´è‰'); f.dietPreference.naturalFood.push('è—»ç±»');
  f.dietPreference.naturalFood.push('å°è™«'); f.dietPreference.naturalFood.push('æµ®æ¸¸ç”Ÿç‰©');
  f.dietPreference.naturalFood.push('çº¢è™«'); f.dietPreference.naturalFood.push('èš¯èš“');
  return f;
}

function createCarp(): Fish {
  const f = new Fish();
  f.id = 'carp'; f.name = 'é²¤é±¼'; f.scientificName = 'Cyprinus carpio';
  f.category = 'freshwater'; f.description = 'ä½“å‹è¾ƒå¤§ï¼Œè­¦è§‰æ€§é«˜ï¼Œå–œæ¬¢ç”œé¦™å‘³é¥µæ–™'; f.difficulty = 4;
  f.waterType.push('pond'); f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'bottom';
  f.habits.temperatureRange = TemperatureRange.create(8, 22, 32);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('afternoon'); f.habits.activeTime.push('dusk');
  f.habits.seasonActivity = SeasonActivity.create(8, 9, 9, 4);
  f.habits.alertness = 8; f.habits.schooling = false; f.habits.feedingStyle = 'cautious';
  f.dietPreference.type = 'omnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(85, 50, 70, 30, 20, 40, 60, 20, 50);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'sweet'), SeasonFlavorAdjust.create('sweet', 'fruity'),
    SeasonFlavorAdjust.create('sweet', 'fragrant'), SeasonFlavorAdjust.create('fishy', 'wine'));
  f.dietPreference.naturalFood.push('èºè›³'); f.dietPreference.naturalFood.push('æ²³èšŒ');
  f.dietPreference.naturalFood.push('æ°´è‰'); f.dietPreference.naturalFood.push('ç‰ç±³');
  f.dietPreference.naturalFood.push('çº¢è–¯'); f.dietPreference.naturalFood.push('èš¯èš“');
  return f;
}


function createGrass(): Fish {
  const f = new Fish();
  f.id = 'grass'; f.name = 'è‰é±¼'; f.scientificName = 'Ctenopharyngodon idella';
  f.category = 'freshwater'; f.description = 'è‰é£Ÿæ€§é±¼ç±»ï¼Œå–œé£Ÿå«©è‰å’Œå‘é…µé¥µæ–?; f.difficulty = 3;
  f.waterType.push('pond'); f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'middle';
  f.habits.temperatureRange = TemperatureRange.create(10, 25, 35);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('afternoon');
  f.habits.seasonActivity = SeasonActivity.create(7, 10, 8, 3);
  f.habits.alertness = 6; f.habits.schooling = true; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'herbivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(60, 20, 90, 50, 30, 30, 70, 40, 60);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fragrant', 'sour'), SeasonFlavorAdjust.create('sour', 'fragrant'),
    SeasonFlavorAdjust.create('sweet', 'fragrant'), SeasonFlavorAdjust.create('fishy', 'fragrant'));
  f.dietPreference.naturalFood.push('å«©è‰'); f.dietPreference.naturalFood.push('èŠ¦è‹‡èŠ?);
  f.dietPreference.naturalFood.push('ç‰ç±³'); f.dietPreference.naturalFood.push('éº¦ç²’');
  f.dietPreference.naturalFood.push('æ¡‘è‘š'); f.dietPreference.naturalFood.push('æ„æ ‘æ?);
  return f;
}

function createSilver(): Fish {
  const f = new Fish();
  f.id = 'silver'; f.name = 'é²¢é±¼'; f.scientificName = 'Hypophthalmichthys molitrix';
  f.category = 'freshwater'; f.description = 'æ»¤é£Ÿæ€§é±¼ç±»ï¼Œå–œé…¸è‡­å‘³ï¼Œä¸­ä¸Šå±‚æ´»åŠ¨'; f.difficulty = 2;
  f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'surface';
  f.habits.temperatureRange = TemperatureRange.create(15, 28, 35);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('noon'); f.habits.activeTime.push('afternoon');
  f.habits.seasonActivity = SeasonActivity.create(6, 10, 7, 2);
  f.habits.alertness = 4; f.habits.schooling = true; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'herbivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(30, 40, 50, 90, 85, 20, 30, 70, 40);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('sour', 'garlic'), SeasonFlavorAdjust.create('stinky', 'sour'),
    SeasonFlavorAdjust.create('sour', 'stinky'), SeasonFlavorAdjust.create('fishy', 'sour'));
  f.dietPreference.naturalFood.push('æµ®æ¸¸è—»ç±»'); f.dietPreference.naturalFood.push('æœ‰æœºç¢å±‘');
  f.dietPreference.naturalFood.push('æµ®æ¸¸ç”Ÿç‰©');
  return f;
}

function createBighead(): Fish {
  const f = new Fish();
  f.id = 'bighead'; f.name = 'é³™é±¼'; f.scientificName = 'Hypophthalmichthys nobilis';
  f.category = 'freshwater'; f.description = 'åˆç§°èŠ±é²¢ã€èƒ–å¤´é±¼ï¼Œæ»¤é£Ÿæ€§ï¼Œå–œè‡­å‘?; f.difficulty = 2;
  f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'middle';
  f.habits.temperatureRange = TemperatureRange.create(15, 26, 33);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('afternoon');
  f.habits.seasonActivity = SeasonActivity.create(6, 9, 7, 2);
  f.habits.alertness = 5; f.habits.schooling = true; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'omnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(25, 50, 40, 80, 95, 15, 20, 60, 30);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('stinky', 'sour'), SeasonFlavorAdjust.create('stinky', 'garlic'),
    SeasonFlavorAdjust.create('sour', 'stinky'), SeasonFlavorAdjust.create('fishy', 'stinky'));
  f.dietPreference.naturalFood.push('æµ®æ¸¸åŠ¨ç‰©'); f.dietPreference.naturalFood.push('æœ‰æœºç¢å±‘');
  f.dietPreference.naturalFood.push('è½®è™«'); f.dietPreference.naturalFood.push('æè§’ç±?);
  return f;
}


function createCatfish(): Fish {
  const f = new Fish();
  f.id = 'catfish'; f.name = 'é²¶é±¼'; f.scientificName = 'Silurus asotus';
  f.category = 'freshwater'; f.description = 'è‚‰é£Ÿæ€§é±¼ç±»ï¼Œå¤œé—´æ´»åŠ¨ï¼Œå–œæµ“è…¥è‡­å‘³'; f.difficulty = 2;
  f.waterType.push('pond'); f.waterType.push('river');
  f.habits.waterLayer = 'bottom';
  f.habits.temperatureRange = TemperatureRange.create(10, 24, 32);
  f.habits.activeTime.push('dusk'); f.habits.activeTime.push('night'); f.habits.activeTime.push('dawn');
  f.habits.seasonActivity = SeasonActivity.create(7, 9, 8, 4);
  f.habits.alertness = 3; f.habits.schooling = false; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'carnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(10, 95, 20, 15, 90, 5, 5, 30, 10);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'stinky'), SeasonFlavorAdjust.create('stinky', 'fishy'),
    SeasonFlavorAdjust.create('fishy', 'stinky'), SeasonFlavorAdjust.create('fishy', 'stinky'));
  f.dietPreference.naturalFood.push('å°é±¼'); f.dietPreference.naturalFood.push('è™?);
  f.dietPreference.naturalFood.push('èš¯èš“'); f.dietPreference.naturalFood.push('æ³¥é³…');
  f.dietPreference.naturalFood.push('è›™ç±»'); f.dietPreference.naturalFood.push('åŠ¨ç‰©å†…è„');
  return f;
}

function createBlack(): Fish {
  const f = new Fish();
  f.id = 'black'; f.name = 'é’é±¼'; f.scientificName = 'Mylopharyngodon piceus';
  f.category = 'freshwater'; f.description = 'å››å¤§å®¶é±¼ä¹‹é¦–ï¼Œä½“å‹å¤§ï¼Œå–œé£Ÿèºè›?; f.difficulty = 5;
  f.waterType.push('reservoir'); f.waterType.push('river');
  f.habits.waterLayer = 'bottom';
  f.habits.temperatureRange = TemperatureRange.create(12, 24, 30);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('afternoon');
  f.habits.seasonActivity = SeasonActivity.create(7, 9, 8, 3);
  f.habits.alertness = 9; f.habits.schooling = false; f.habits.feedingStyle = 'cautious';
  f.dietPreference.type = 'carnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(40, 70, 50, 20, 40, 20, 30, 25, 35);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'fragrant'), SeasonFlavorAdjust.create('fragrant', 'fishy'),
    SeasonFlavorAdjust.create('sweet', 'fishy'), SeasonFlavorAdjust.create('fishy', 'sweet'));
  f.dietPreference.naturalFood.push('èºè›³'); f.dietPreference.naturalFood.push('æ²³èšŒ');
  f.dietPreference.naturalFood.push('èš¬å­'); f.dietPreference.naturalFood.push('è™?);
  f.dietPreference.naturalFood.push('èŸ?);
  return f;
}

function createBream(): Fish {
  const f = new Fish();
  f.id = 'bream'; f.name = 'é³Šé±¼'; f.scientificName = 'Parabramis pekinensis';
  f.category = 'freshwater'; f.description = 'åˆç§°æ­¦æ˜Œé±¼ï¼Œä¸­å±‚é±¼ç±»ï¼Œå–œé¦™ç”œå‘?; f.difficulty = 3;
  f.waterType.push('pond'); f.waterType.push('river'); f.waterType.push('reservoir');
  f.habits.waterLayer = 'middle';
  f.habits.temperatureRange = TemperatureRange.create(10, 22, 30);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('afternoon'); f.habits.activeTime.push('dusk');
  f.habits.seasonActivity = SeasonActivity.create(8, 8, 9, 4);
  f.habits.alertness = 6; f.habits.schooling = true; f.habits.feedingStyle = 'opportunistic';
  f.dietPreference.type = 'omnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(75, 45, 85, 25, 15, 55, 50, 20, 45);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fragrant', 'fishy'), SeasonFlavorAdjust.create('fragrant', 'sweet'),
    SeasonFlavorAdjust.create('sweet', 'fragrant'), SeasonFlavorAdjust.create('fishy', 'fragrant'));
  f.dietPreference.naturalFood.push('æ°´è‰'); f.dietPreference.naturalFood.push('è—»ç±»');
  f.dietPreference.naturalFood.push('å°è™«'); f.dietPreference.naturalFood.push('æµ®æ¸¸ç”Ÿç‰©');
  return f;
}


function createTilapia(): Fish {
  const f = new Fish();
  f.id = 'tilapia'; f.name = 'ç½—éé±?; f.scientificName = 'Oreochromis niloticus';
  f.category = 'freshwater'; f.description = 'çƒ­å¸¦é±¼ç§ï¼Œé€‚åº”æ€§å¼ºï¼Œå®¹æ˜“é’“è?; f.difficulty = 1;
  f.waterType.push('pond');
  f.habits.waterLayer = 'all';
  f.habits.temperatureRange = TemperatureRange.create(18, 28, 38);
  f.habits.activeTime.push('morning'); f.habits.activeTime.push('noon'); f.habits.activeTime.push('afternoon');
  f.habits.seasonActivity = SeasonActivity.create(6, 10, 7, 2);
  f.habits.alertness = 3; f.habits.schooling = true; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'omnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(60, 70, 60, 30, 50, 40, 35, 45, 25);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'fragrant'), SeasonFlavorAdjust.create('fragrant', 'fishy'),
    SeasonFlavorAdjust.create('fishy', 'sweet'), SeasonFlavorAdjust.create('fishy', 'fishy'));
  f.dietPreference.naturalFood.push('è—»ç±»'); f.dietPreference.naturalFood.push('æ°´è‰');
  f.dietPreference.naturalFood.push('å°è™«'); f.dietPreference.naturalFood.push('æœ‰æœºç¢å±‘');
  f.dietPreference.naturalFood.push('èš¯èš“');
  return f;
}

function createYellowhead(): Fish {
  const f = new Fish();
  f.id = 'yellowhead'; f.name = 'é»„é¢¡é±?; f.scientificName = 'Pelteobagrus fulvidraco';
  f.category = 'freshwater'; f.description = 'åˆç§°é»„è¾£ä¸ï¼Œè‚‰é£Ÿæ€§ï¼Œå¤œé—´æ´»åŠ¨'; f.difficulty = 2;
  f.waterType.push('pond'); f.waterType.push('river');
  f.habits.waterLayer = 'bottom';
  f.habits.temperatureRange = TemperatureRange.create(8, 22, 30);
  f.habits.activeTime.push('dusk'); f.habits.activeTime.push('night'); f.habits.activeTime.push('dawn');
  f.habits.seasonActivity = SeasonActivity.create(7, 9, 8, 4);
  f.habits.alertness = 4; f.habits.schooling = false; f.habits.feedingStyle = 'aggressive';
  f.dietPreference.type = 'carnivore';
  f.dietPreference.flavorPreference = FlavorProfile.create(15, 90, 25, 10, 70, 10, 5, 20, 15);
  f.dietPreference.seasonalFlavorAdjust = SeasonalFlavorAdjustment.create(
    SeasonFlavorAdjust.create('fishy', 'stinky'), SeasonFlavorAdjust.create('fishy', 'stinky'),
    SeasonFlavorAdjust.create('fishy', 'stinky'), SeasonFlavorAdjust.create('fishy', 'fishy'));
  f.dietPreference.naturalFood.push('èš¯èš“'); f.dietPreference.naturalFood.push('çº¢è™«');
  f.dietPreference.naturalFood.push('å°è™¾'); f.dietPreference.naturalFood.push('å°é±¼');
  f.dietPreference.naturalFood.push('èºè‚‰');
  return f;
}

function getFishData(): Fish[] {
  const fishes: Fish[] = [];
  fishes.push(createCrucian());
  fishes.push(createCarp());
  fishes.push(createGrass());
  fishes.push(createSilver());
  fishes.push(createBighead());
  fishes.push(createCatfish());
  fishes.push(createBlack());
  fishes.push(createBream());
  fishes.push(createTilapia());
  fishes.push(createYellowhead());
  return fishes;
}

class FishDatabaseClass {
  private fishes: Fish[] = [];
  constructor() { this.fishes = getFishData(); }
  getAllFishes(): Fish[] { return this.fishes; }
  getFishById(id: string): Fish | undefined {
    for (let i = 0; i < this.fishes.length; i++) {
      if (this.fishes[i].id === id) return this.fishes[i];
    }
    return undefined;
  }
  getFishByWaterType(waterType: string): Fish[] {
    const result: Fish[] = [];
    for (let i = 0; i < this.fishes.length; i++) {
      const fish = this.fishes[i];
      for (let j = 0; j < fish.waterType.length; j++) {
        if (fish.waterType[j] === waterType) { result.push(fish); break; }
      }
    }
    return result;
  }
  getFishByCategory(category: FishCategory): Fish[] {
    const result: Fish[] = [];
    for (let i = 0; i < this.fishes.length; i++) {
      if (this.fishes[i].category === category) result.push(this.fishes[i]);
    }
    return result;
  }
  getFishNameMap(): Map<string, string> {
    const map = new Map<string, string>();
    for (let i = 0; i < this.fishes.length; i++) {
      map.set(this.fishes[i].id, this.fishes[i].name);
    }
    return map;
  }
}

export const fishDatabase = new FishDatabaseClass();
export function getFishById(id: string): Fish | undefined { return fishDatabase.getFishById(id); }
export function getFishByWaterType(waterType: string): Fish[] { return fishDatabase.getFishByWaterType(waterType); }
export function getFishByCategory(category: FishCategory): Fish[] { return fishDatabase.getFishByCategory(category); }
export function getFishNameMap(): Map<string, string> { return fishDatabase.getFishNameMap(); }

# 饵知道 - 色彩对比度修复计划

## 问题描述
华为应用市场审核标准 2.1.4.1 要求：
- 图标或标题文字与背景对比度 > 3:1
- 正文文字与背景对比度 > 4.5:1

## 当前问题分析

### 不合规配色

| 问题 | 当前值 | 对比度 | 要求 | 修复方案 |
|------|--------|--------|------|----------|
| 主色文字 | #E8A849 | 2.4:1 | 3:1 | 改为 #C4872E |
| 次要提示文字 | #999999 | 2.8:1 | 4.5:1 | 改为 #757575 |
| 占位符文字 | #CCCCCC | 1.6:1 | 4.5:1 | 改为 #9E9E9E |

### 合规配色（无需修改）

| 配色 | 值 | 对比度 | 状态 |
|------|-----|--------|------|
| 主文字 | #1A1A1A | 16.1:1 | ✅ |
| 次要文字 | #666666 | 5.7:1 | ✅ |
| 成功色 | #52C41A | 3.2:1 | ✅ |
| 错误色 | #FF4D4F | 4.0:1 | ✅ |

## 修复方案

### 1. 修改 ThemeColors.ets

```typescript
// 修改前
static readonly PRIMARY: string = '#E8A849';
static readonly TEXT_MUTED: string = '#999999';
static readonly TEXT_HINT: string = '#CCCCCC';

// 修改后
static readonly PRIMARY: string = '#E8A849';        // 保持不变（用于背景）
static readonly PRIMARY_TEXT: string = '#C4872E';   // 新增：用于文字的深色主色
static readonly TEXT_MUTED: string = '#757575';     // 加深：对比度 4.6:1
static readonly TEXT_HINT: string = '#9E9E9E';      // 加深：对比度 3.5:1
```

### 2. 需要修改的页面/组件

#### 高优先级（主色文字）
- [ ] HomePage.ets - 主色标题、强调文字
- [ ] RecipeDetailPage.ets - 配方名称、标签
- [ ] FishingRecordPage.ets - 统计数字
- [ ] VictorySharePage.ets - 分享卡片文字
- [ ] PreciseMatchPage.ets - 匹配度显示

#### 中优先级（提示文字）
- [ ] AddRecordPage.ets - 输入框占位符
- [ ] RecipeBrowserPage.ets - 筛选提示
- [ ] MapPage.ets - 位置提示文字
- [ ] SettingsPage.ets - 说明文字

#### 低优先级（次要文字）
- [ ] 各页面的时间戳、次要信息

## 修复步骤

### Step 1: 更新主题色定义
修改 `ThemeColors.ets`，新增 `PRIMARY_TEXT` 并调整灰色系

### Step 2: 全局替换
1. 搜索所有使用 `ThemeColors.PRIMARY` 作为 fontColor 的地方
2. 替换为 `ThemeColors.PRIMARY_TEXT`
3. 搜索 `TEXT_MUTED` 和 `TEXT_HINT` 确认使用场景

### Step 3: 逐页检查
按优先级检查每个页面的文字对比度

### Step 4: 测试验证
使用对比度检测工具验证修复效果

## 新配色对比度验证

| 配色 | 新值 | 与白色背景对比度 | 与浅灰背景对比度 |
|------|------|------------------|------------------|
| PRIMARY_TEXT | #C4872E | 3.5:1 ✅ | 3.2:1 ✅ |
| TEXT_MUTED | #757575 | 4.6:1 ✅ | 4.2:1 ✅ |
| TEXT_HINT | #9E9E9E | 3.0:1 ✅ | 2.8:1 (仅用于占位符) |

## 预计工作量

- ThemeColors 修改：10分钟
- 页面修改：约 20 个文件，预计 2 小时
- 测试验证：30分钟

**总计：约 3 小时**

<h1 _ngcontent-iia-c119="" class="doc-title ng-star-inserted" title="地点选取"> 地点选取 </h1>

<div _ngcontent-iia-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section11661811099">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section11661811099" tips="复制节点链接"></i></h2>          <p>本章节将向您介绍如何集成地点选取控件，您无需自己开发地图页面，可<span style="color: rgb(38,38,38);">快速实现地点选取的能力。</span>该控件不支持在智能表设备中调用。</p>     <div class="tablenoborder">      <div class="tbBox"><table style="border-style: none;" class="layoutFixed idpTab">               <tbody><tr>         <td class="row-nocellborder" style="border: none;" valign="top" width="45.59%">          <div class="fignone">           <span class="figcap"><b>图1 </b>地点选取页</span>          </div>          <p><span><img height="669.6417" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114548.08867537074564972033493911858633:50001231000000:2800:A4D594852867306A3D0A298F993FB469F8E3BCC7DEE96DE387937CD65A8F08DC.jpg" title="点击放大" width="310.2225"></span></p></td>         <td class="cellrowborder" style="border: none;" valign="top" width="54.410000000000004%">          <div class="fignone">           <span class="figcap"><b>图2 </b>地点选取</span>          </div>          <p><span><img height="667.193835" originheight="917" originwidth="425" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114548.81510547346565921421090210388915:50001231000000:2800:B33CE00F1BFFCF4B74B172416FAFC165D19398D78770F7EE095738167594F281.png" title="点击放大" width="309.225"></span></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section123691321746">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section123691321746" tips="复制节点链接"></i></h2>          <p>使用该功能需满足以下条件：</p>     <ul>      <li>仅支持手机、平板和2in1设备。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section196543913133">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section196543913133" tips="复制节点链接"></i></h2>          <p>地点选取控件功能主要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap" target="_blank">sceneMap</a>命名空间下的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section927375116348" target="_blank">chooseLocation</a>方法提供，更多接口及使用方法请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap" target="_blank">接口文档</a>。</p>    </div>    <div class="tablenoborder">     <div class="tbBox"><table class="layoutFixed idpTab">      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.4.1.3.1.1" valign="top" width="67.96%">         <p>接口名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.4.1.3.1.2" valign="top" width="32.04%">         <p>描述</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" valign="top" width="67.96%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section1313113517227" target="_blank">LocationChoosingOptions</a></p></td>        <td class="cellrowborder" valign="top" width="32.04%">         <p>地点选取的参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="67.96%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section927375116348" target="_blank">chooseLocation</a>(context: common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>, options: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section1313113517227" target="_blank">LocationChoosingOptions</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section0471517192216" target="_blank">LocationChoosingResult</a>&gt;</p></td>        <td class="cellrowborder" valign="top" width="32.04%">         <p>地点选取。</p></td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="67.96%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section0471517192216" target="_blank">LocationChoosingResult</a></p></td>        <td class="cellrowborder" valign="top" width="32.04%">         <p>地点选取的返回结果。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section72961091618">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section72961091618" tips="复制节点链接"></i></h2>          <ol>      <li>导入相关模块。       <div _ngcontent-iia-c106="" class="highlight-div"><div _ngcontent-iia-c106="" class="highlight-div-header"><div _ngcontent-iia-c106="" class="highlight-div-header-left"><div _ngcontent-iia-c106="" class="handle-button expand-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iia-c106="" class="highlight-div-header-right"><div _ngcontent-iia-c106="" class="handle-button ai-button"></div><div _ngcontent-iia-c106="" class="handle-button line-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iia-c106="" class="handle-button theme-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iia-c106="" class="handle-button copy-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iia-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sceneMap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MapKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li></ol></pre></div></div></li>      <li>创建地点选取参数，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-scenemap#section927375116348" target="_blank">chooseLocation</a>方法拉起地点选取页。       <div _ngcontent-iia-c106="" class="highlight-div"><div _ngcontent-iia-c106="" class="highlight-div-header"><div _ngcontent-iia-c106="" class="highlight-div-header-left"><div _ngcontent-iia-c106="" class="handle-button expand-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iia-c106="" class="highlight-div-header-right"><div _ngcontent-iia-c106="" class="handle-button ai-button"></div><div _ngcontent-iia-c106="" class="handle-button line-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iia-c106="" class="handle-button theme-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iia-c106="" class="handle-button copy-button"><div _ngcontent-iia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iia-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">locationChoosingOptions</span>: sceneMap.<span class="hljs-property">LocationChoosingOptions</span> = {</li><li>  <span class="hljs-comment">// 地图中心点坐标</span></li><li>  <span class="hljs-attr">location</span>: { </li><li>    <span class="hljs-attr">latitude</span>: <span class="hljs-number">39.91804051376904</span>,</li><li>    <span class="hljs-attr">longitude</span>: <span class="hljs-number">116.3970536796932</span></li><li>  },</li><li>  <span class="hljs-comment">// 展示搜索控件</span></li><li>  <span class="hljs-attr">searchEnabled</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-comment">// 展示附近POI</span></li><li>  <span class="hljs-attr">showNearbyPoi</span>: <span class="hljs-literal">true</span></li><li>};</li><li><span class="hljs-comment">// 拉起地点选取页</span></li><li>sceneMap.<span class="hljs-title function_">chooseLocation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>,</li><li>  locationChoosingOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ChooseLocation"</span>, <span class="hljs-string">"Succeeded in choosing location."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ChooseLocation"</span>, <span class="hljs-string">`Failed to choose location, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>